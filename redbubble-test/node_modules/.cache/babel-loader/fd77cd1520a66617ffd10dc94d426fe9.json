{"ast":null,"code":"\"use strict\";\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __makeTemplateObject = void 0 && (void 0).__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = void 0 && (void 0).__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar Playground_1 = require(\"./Playground\");\n\nvar react_helmet_1 = require(\"react-helmet\");\n\nvar yaml = require(\"js-yaml\");\n\nvar ProjectsSideNav_1 = require(\"./ProjectsSideNav\");\n\nvar styled_1 = require(\"../styled\");\n\nvar theme_1 = require(\"../styled/theme\"); // import OldThemeProvider from './Theme/ThemeProvider'\n\n\nvar util_1 = require(\"./util\");\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar reducers_1 = require(\"../state/workspace/reducers\");\n\nvar actions_1 = require(\"../state/workspace/actions\");\n\nvar graphql_1 = require(\"graphql\");\n\nfunction getParameterByName(name, uri) {\n  var url = uri || window.location.href;\n  name = name.replace(/[\\[\\]]/g, '\\\\$&');\n  var regexa = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');\n  var results = regexa.exec(url);\n\n  if (!results || !results[2]) {\n    return null;\n  }\n\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\nvar PlaygroundWrapper =\n/** @class */\nfunction (_super) {\n  __extends(PlaygroundWrapper, _super);\n\n  function PlaygroundWrapper(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.handleUpdateSessionCount = function () {\n      _this.forceUpdate();\n    };\n\n    _this.getPlaygroundRef = function (ref) {\n      _this.playground = ref;\n\n      if (typeof _this.props.getRef === 'function') {\n        _this.props.getRef(ref);\n      }\n    };\n\n    _this.handleChangeConfig = function (configString) {\n      _this.setState({\n        configString: configString\n      });\n    };\n\n    _this.handleSaveConfig = function () {\n      /* tslint:disable-next-line */\n      if (typeof _this.props.onSaveConfig === 'function') {\n        /* tslint:disable-next-line */\n        _this.props.onSaveConfig(_this.state.configString);\n      }\n    };\n\n    _this.handleSelectEnv = function (env, projectName) {\n      var _a = util_1.getActiveEndpoints(_this.props.config, env, projectName),\n          endpoint = _a.endpoint,\n          subscriptionEndpoint = _a.subscriptionEndpoint,\n          headers = _a.headers;\n\n      _this.setState({\n        activeEnv: env,\n        endpoint: endpoint,\n        headers: headers,\n        subscriptionEndpoint: _this.normalizeSubscriptionUrl(endpoint, subscriptionEndpoint),\n        activeProjectName: projectName\n      });\n    };\n\n    _this.handleChangeEndpoint = function (endpoint) {\n      _this.setState({\n        endpoint: endpoint\n      });\n    };\n\n    _this.handleChangeSubscriptionsEndpoint = function (subscriptionEndpoint) {\n      _this.setState({\n        subscriptionEndpoint: subscriptionEndpoint\n      });\n    };\n\n    global.m = _this;\n    _this.state = _this.mapPropsToState(props);\n\n    _this.removeLoader();\n\n    return _this;\n  }\n\n  PlaygroundWrapper.prototype.mapPropsToState = function (props) {\n    var configIsYaml = props.configString ? this.isConfigYaml(props.configString) : false;\n\n    var _a = this.getInitialActiveEnv(props.config),\n        activeEnv = _a.activeEnv,\n        projectName = _a.projectName;\n\n    var endpoint = props.endpoint || props.endpointUrl || getParameterByName('endpoint') || location.href;\n    var result = this.extractEndpointAndHeaders(endpoint);\n    endpoint = result.endpoint;\n    var headers = result.headers;\n    var subscriptionEndpoint = props.subscriptionEndpoint || getParameterByName('subscriptionEndpoint');\n\n    if (props.configString && props.config && activeEnv) {\n      var endpoints = util_1.getActiveEndpoints(props.config, activeEnv, projectName);\n      endpoint = endpoints.endpoint;\n      subscriptionEndpoint = endpoints.subscriptionEndpoint;\n      headers = endpoints.headers;\n    }\n\n    subscriptionEndpoint = this.normalizeSubscriptionUrl(endpoint, subscriptionEndpoint) || undefined;\n    return {\n      endpoint: this.absolutizeUrl(endpoint),\n      platformToken: props.platformToken || localStorage.getItem('platform-token') || undefined,\n      subscriptionEndpoint: subscriptionEndpoint,\n      configIsYaml: configIsYaml,\n      configString: props.configString,\n      activeEnv: activeEnv,\n      activeProjectName: projectName,\n      headers: headers\n    };\n  };\n\n  PlaygroundWrapper.prototype.extractEndpointAndHeaders = function (endpoint) {\n    var splitted = endpoint.split('?');\n\n    if (splitted.length === 1) {\n      return {\n        endpoint: endpoint\n      };\n    }\n\n    try {\n      var headers = getParameterByName('headers', endpoint);\n\n      if (headers) {\n        return {\n          headers: JSON.parse(headers),\n          endpoint: splitted[0]\n        };\n      }\n    } catch (e) {//\n    }\n\n    return {\n      endpoint: splitted[0]\n    };\n  };\n\n  PlaygroundWrapper.prototype.removeLoader = function () {\n    var loadingWrapper = document.getElementById('loading-wrapper');\n\n    if (loadingWrapper) {\n      loadingWrapper.remove();\n    }\n  };\n\n  PlaygroundWrapper.prototype.normalizeSubscriptionUrl = function (endpoint, subscriptionEndpoint) {\n    if (subscriptionEndpoint) {\n      if (subscriptionEndpoint.startsWith('/')) {\n        var secure = endpoint.includes('https') || location.href.includes('https') ? 's' : '';\n        return \"ws\" + secure + \"://\" + location.host + subscriptionEndpoint;\n      } else {\n        return subscriptionEndpoint.replace(/^http/, 'ws');\n      }\n    }\n\n    return this.getGraphcoolSubscriptionEndpoint(endpoint).replace(/^http/, 'ws');\n  };\n\n  PlaygroundWrapper.prototype.getGraphcoolSubscriptionEndpoint = function (endpoint) {\n    if (endpoint.includes('api.graph.cool')) {\n      return \"wss://subscriptions.graph.cool/v1/\" + endpoint.split('/').slice(-1)[0];\n    }\n\n    return endpoint.replace(/^http/, 'ws');\n  };\n\n  PlaygroundWrapper.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\n    // Reactive props (props that cause a state change upon being changed)\n    if (nextProps.endpoint !== this.props.endpoint || nextProps.endpointUrl !== this.props.endpointUrl || nextProps.subscriptionEndpoint !== this.props.subscriptionEndpoint || nextProps.configString !== this.props.configString || nextProps.platformToken !== this.props.platformToken || nextProps.config !== this.props.config) {\n      this.setState(this.mapPropsToState(nextProps));\n      this.setInitialWorkspace(nextProps);\n    }\n  };\n\n  PlaygroundWrapper.prototype.getInitialActiveEnv = function (config) {\n    if (config) {\n      if (config.extensions && config.extensions.endpoints) {\n        return {\n          activeEnv: Object.keys(config.extensions.endpoints)[0]\n        };\n      }\n\n      if (config.projects) {\n        var projectName = Object.keys(config.projects)[0];\n        var project = config.projects[projectName];\n\n        if (project.extensions && project.extensions.endpoints) {\n          return {\n            activeEnv: Object.keys(project.extensions.endpoints)[0],\n            projectName: projectName\n          };\n        }\n      }\n    }\n\n    return {};\n  };\n\n  PlaygroundWrapper.prototype.isConfigYaml = function (configString) {\n    try {\n      yaml.safeLoad(configString);\n      return true;\n    } catch (e) {//\n    }\n\n    return false;\n  };\n\n  PlaygroundWrapper.prototype.absolutizeUrl = function (url) {\n    if (url.startsWith('/')) {\n      return location.origin + url;\n    }\n\n    return url;\n  };\n\n  PlaygroundWrapper.prototype.UNSAFE_componentWillMount = function () {\n    var platformToken = getParameterByName('platform-token');\n\n    if (platformToken && platformToken.length > 0) {\n      localStorage.setItem('platform-token', platformToken);\n      window.location.replace(window.location.origin + window.location.pathname);\n    }\n  };\n\n  PlaygroundWrapper.prototype.componentDidMount = function () {\n    var _this = this;\n\n    if (this.state.subscriptionEndpoint === '') {\n      this.updateSubscriptionsUrl();\n    }\n\n    setTimeout(function () {\n      _this.removePlaygroundInClass();\n    }, 5000);\n    this.setInitialWorkspace();\n\n    if (this.props.tabs) {\n      this.props.injectTabs(this.props.tabs);\n    } else {\n      var query = getParameterByName('query');\n\n      if (query) {\n        var endpoint = getParameterByName('endpoint') || this.state.endpoint;\n        this.props.injectTabs([{\n          query: query,\n          endpoint: endpoint\n        }]);\n      } else {\n        var tabsString = getParameterByName('tabs');\n\n        if (tabsString) {\n          try {\n            var tabs = JSON.parse(tabsString);\n            this.props.injectTabs(tabs);\n          } catch (e) {//\n          }\n        }\n      }\n    }\n\n    if (this.props.schema) {\n      // in this case it's sdl\n      if (typeof this.props.schema === 'string') {\n        this.setState({\n          schema: graphql_1.buildSchema(this.props.schema)\n        }); // if it's an object, it must be an introspection query\n      } else {\n        this.setState({\n          schema: graphql_1.buildClientSchema(this.props.schema)\n        });\n      }\n    }\n  };\n\n  PlaygroundWrapper.prototype.setInitialWorkspace = function (props) {\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    if (props.config) {\n      var activeEnv = this.getInitialActiveEnv(props.config);\n      var endpoints = util_1.getActiveEndpoints(props.config, activeEnv.activeEnv, activeEnv.projectName);\n      var endpoint = endpoints.endpoint;\n      var subscriptionEndpoint = endpoints.subscriptionEndpoint || this.normalizeSubscriptionUrl(endpoint, endpoints.subscriptionEndpoint);\n      var headers = endpoints.headers;\n      this.setState({\n        endpoint: endpoint,\n        subscriptionEndpoint: subscriptionEndpoint,\n        headers: headers,\n        activeEnv: activeEnv.activeEnv,\n        activeProjectName: activeEnv.projectName\n      });\n    }\n  };\n\n  PlaygroundWrapper.prototype.removePlaygroundInClass = function () {\n    var root = document.getElementById('root');\n\n    if (root) {\n      root.classList.remove('playgroundIn');\n    }\n  };\n\n  PlaygroundWrapper.prototype.render = function () {\n    var title = this.props.setTitle ? /*#__PURE__*/React.createElement(react_helmet_1.Helmet, null, /*#__PURE__*/React.createElement(\"title\", null, this.getTitle())) : null;\n    var defaultHeaders = this.props.headers || {};\n    var stateHeaders = this.state.headers || {};\n\n    var combinedHeaders = __assign(__assign({}, defaultHeaders), stateHeaders);\n\n    var theme = this.props.theme;\n    return /*#__PURE__*/React.createElement(\"div\", null, title, /*#__PURE__*/React.createElement(styled_1.ThemeProvider, {\n      theme: __assign(__assign({}, styled_1.theme), {\n        mode: theme,\n        colours: theme === 'dark' ? theme_1.darkColours : theme_1.lightColours,\n        editorColours: __assign(__assign({}, theme === 'dark' ? theme_1.darkEditorColours : theme_1.lightEditorColours), this.props.codeTheme),\n        settings: this.props.settings\n      })\n    }, /*#__PURE__*/React.createElement(App, null, this.props.config && this.state.activeEnv && /*#__PURE__*/React.createElement(ProjectsSideNav_1[\"default\"], {\n      config: this.props.config,\n      folderName: this.props.folderName || 'GraphQL App',\n      theme: theme,\n      activeEnv: this.state.activeEnv,\n      onSelectEnv: this.handleSelectEnv,\n      onNewWorkspace: this.props.onNewWorkspace,\n      showNewWorkspace: Boolean(this.props.showNewWorkspace),\n      isElectron: Boolean(this.props.isElectron),\n      activeProjectName: this.state.activeProjectName,\n      configPath: this.props.configPath\n    }), /*#__PURE__*/React.createElement(Playground_1[\"default\"], {\n      endpoint: this.state.endpoint,\n      shareEnabled: this.props.shareEnabled,\n      subscriptionEndpoint: this.state.subscriptionEndpoint,\n      shareUrl: this.state.shareUrl,\n      onChangeEndpoint: this.handleChangeEndpoint,\n      onChangeSubscriptionsEndpoint: this.handleChangeSubscriptionsEndpoint,\n      getRef: this.getPlaygroundRef,\n      config: this.props.config,\n      configString: this.state.configString,\n      configIsYaml: this.state.configIsYaml,\n      canSaveConfig: Boolean(this.props.canSaveConfig),\n      onChangeConfig: this.handleChangeConfig,\n      onSaveConfig: this.handleSaveConfig,\n      onUpdateSessionCount: this.handleUpdateSessionCount,\n      fixedEndpoints: Boolean(this.state.configString),\n      fixedEndpoint: this.props.fixedEndpoint,\n      headers: combinedHeaders,\n      configPath: this.props.configPath,\n      workspaceName: this.props.workspaceName || this.state.activeProjectName,\n      createApolloLink: this.props.createApolloLink,\n      schema: this.state.schema\n    }))));\n  };\n\n  PlaygroundWrapper.prototype.getTitle = function () {\n    if (this.state.platformToken || this.state.endpoint.includes('api.graph.cool')) {\n      var projectId = this.getProjectId(this.state.endpoint);\n      var cluster = this.state.endpoint.includes('api.graph.cool') ? 'shared' : 'local';\n      return cluster + \"/\" + projectId + \" - Playground\";\n    }\n\n    return \"Playground - \" + this.state.endpoint;\n  };\n\n  PlaygroundWrapper.prototype.updateSubscriptionsUrl = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var candidates, validCandidate;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            candidates = this.getSubscriptionsUrlCandidated(this.state.endpoint);\n            return [4\n            /*yield*/\n            , find(candidates, function (candidate) {\n              return _this.wsEndpointValid(candidate);\n            })];\n\n          case 1:\n            validCandidate = _a.sent();\n\n            if (validCandidate) {\n              this.setState({\n                subscriptionEndpoint: validCandidate\n              });\n            }\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  PlaygroundWrapper.prototype.getSubscriptionsUrlCandidated = function (endpoint) {\n    var candidates = [];\n    candidates.push(endpoint.replace('https', 'wss').replace('http', 'ws'));\n\n    if (endpoint.includes('graph.cool')) {\n      candidates.push(\"wss://subscriptions.graph.cool/v1/\" + this.getProjectId(endpoint));\n    }\n\n    if (endpoint.includes('/simple/v1/')) {\n      // it's a graphcool local endpoint\n      var host = endpoint.match(/https?:\\/\\/(.*?)\\//);\n      candidates.push(\"ws://\" + host[1] + \"/subscriptions/v1/\" + this.getProjectId(endpoint));\n    }\n\n    return candidates;\n  };\n\n  PlaygroundWrapper.prototype.wsEndpointValid = function (url) {\n    return new Promise(function (resolve) {\n      var socket = new WebSocket(url, 'graphql-ws');\n      socket.addEventListener('open', function (event) {\n        socket.send(JSON.stringify({\n          type: 'connection_init'\n        }));\n      });\n      socket.addEventListener('message', function (event) {\n        var data = JSON.parse(event.data);\n\n        if (data.type === 'connection_ack') {\n          resolve(true);\n        }\n      });\n      socket.addEventListener('error', function (event) {\n        resolve(false);\n      });\n      setTimeout(function () {\n        resolve(false);\n      }, 1000);\n    });\n  };\n\n  PlaygroundWrapper.prototype.getProjectId = function (endpoint) {\n    return endpoint.split('/').slice(-1)[0];\n  };\n\n  return PlaygroundWrapper;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  var theme = ownProps.theme || reducers_1.getTheme(state, ownProps.settings);\n  var settings = reducers_1.getSettings(state);\n  return {\n    theme: theme,\n    settings: settings\n  };\n};\n\nexports[\"default\"] = react_redux_1.connect(mapStateToProps, {\n  injectTabs: actions_1.injectTabs\n})(PlaygroundWrapper);\n\nfunction find(iterable, predicate) {\n  return __awaiter(this, void 0, void 0, function () {\n    var i, element, result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          i = 0;\n          _a.label = 1;\n\n        case 1:\n          if (!(i < iterable.length)) return [3\n          /*break*/\n          , 4];\n          element = iterable[i];\n          return [4\n          /*yield*/\n          , predicate(element, i)];\n\n        case 2:\n          result = _a.sent();\n\n          if (result) {\n            return [2\n            /*return*/\n            , element];\n          }\n\n          _a.label = 3;\n\n        case 3:\n          i++;\n          return [3\n          /*break*/\n          , 1];\n\n        case 4:\n          return [2\n          /*return*/\n          , null];\n      }\n    });\n  });\n}\n\nvar appearIn = styled_1.keyframes(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  from { \\n    opacity: 0;\\n    transform: translateY(10px);\\n  }\\n  to { \\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n\"], [\"\\n  from { \\n    opacity: 0;\\n    transform: translateY(10px);\\n  }\\n  to { \\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n\"])));\nvar App = styled_1.styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  display: flex;\\n  width: 100%;\\n  opacity: 0;\\n  transform: translateY(10px);\\n  animation: \", \" 0.5s ease-out forwards 0.2s;\\n\"], [\"\\n  display: flex;\\n  width: 100%;\\n  opacity: 0;\\n  transform: translateY(10px);\\n  animation: \", \" 0.5s ease-out forwards 0.2s;\\n\"])), appearIn);\nvar templateObject_1, templateObject_2;","map":{"version":3,"sources":["/Users/wubo/Desktop/card-design/card-design/node_modules/graphql-playground-react/lib/components/PlaygroundWrapper.js"],"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__makeTemplateObject","cooked","raw","defineProperty","value","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","exports","React","require","Playground_1","react_helmet_1","yaml","ProjectsSideNav_1","styled_1","theme_1","util_1","react_redux_1","reducers_1","actions_1","graphql_1","getParameterByName","name","uri","url","window","location","href","replace","regexa","RegExp","results","exec","decodeURIComponent","PlaygroundWrapper","_super","props","_this","handleUpdateSessionCount","forceUpdate","getPlaygroundRef","ref","playground","getRef","handleChangeConfig","configString","setState","handleSaveConfig","onSaveConfig","state","handleSelectEnv","env","projectName","_a","getActiveEndpoints","config","endpoint","subscriptionEndpoint","headers","activeEnv","normalizeSubscriptionUrl","activeProjectName","handleChangeEndpoint","handleChangeSubscriptionsEndpoint","global","m","mapPropsToState","removeLoader","configIsYaml","isConfigYaml","getInitialActiveEnv","endpointUrl","extractEndpointAndHeaders","endpoints","undefined","absolutizeUrl","platformToken","localStorage","getItem","splitted","split","JSON","parse","loadingWrapper","document","getElementById","remove","startsWith","secure","includes","host","getGraphcoolSubscriptionEndpoint","slice","UNSAFE_componentWillReceiveProps","nextProps","setInitialWorkspace","extensions","keys","projects","project","safeLoad","origin","UNSAFE_componentWillMount","setItem","pathname","componentDidMount","updateSubscriptionsUrl","setTimeout","removePlaygroundInClass","tabs","injectTabs","query","tabsString","schema","buildSchema","buildClientSchema","root","classList","render","title","setTitle","createElement","Helmet","getTitle","defaultHeaders","stateHeaders","combinedHeaders","theme","ThemeProvider","mode","colours","darkColours","lightColours","editorColours","darkEditorColours","lightEditorColours","codeTheme","settings","App","folderName","onSelectEnv","onNewWorkspace","showNewWorkspace","Boolean","isElectron","configPath","shareEnabled","shareUrl","onChangeEndpoint","onChangeSubscriptionsEndpoint","canSaveConfig","onChangeConfig","onUpdateSessionCount","fixedEndpoints","fixedEndpoint","workspaceName","createApolloLink","projectId","getProjectId","cluster","candidates","validCandidate","getSubscriptionsUrlCandidated","find","candidate","wsEndpointValid","match","socket","WebSocket","addEventListener","event","send","stringify","type","data","Component","mapStateToProps","ownProps","getTheme","getSettings","connect","iterable","predicate","element","appearIn","keyframes","templateObject_1","styled","div","templateObject_2"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __makeTemplateObject = void 0 && (void 0).__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __assign = void 0 && (void 0).__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = void 0 && (void 0).__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar Playground_1 = require(\"./Playground\");\n\nvar react_helmet_1 = require(\"react-helmet\");\n\nvar yaml = require(\"js-yaml\");\n\nvar ProjectsSideNav_1 = require(\"./ProjectsSideNav\");\n\nvar styled_1 = require(\"../styled\");\n\nvar theme_1 = require(\"../styled/theme\"); // import OldThemeProvider from './Theme/ThemeProvider'\n\n\nvar util_1 = require(\"./util\");\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar reducers_1 = require(\"../state/workspace/reducers\");\n\nvar actions_1 = require(\"../state/workspace/actions\");\n\nvar graphql_1 = require(\"graphql\");\n\nfunction getParameterByName(name, uri) {\n  var url = uri || window.location.href;\n  name = name.replace(/[\\[\\]]/g, '\\\\$&');\n  var regexa = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');\n  var results = regexa.exec(url);\n\n  if (!results || !results[2]) {\n    return null;\n  }\n\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\nvar PlaygroundWrapper =\n/** @class */\nfunction (_super) {\n  __extends(PlaygroundWrapper, _super);\n\n  function PlaygroundWrapper(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.handleUpdateSessionCount = function () {\n      _this.forceUpdate();\n    };\n\n    _this.getPlaygroundRef = function (ref) {\n      _this.playground = ref;\n\n      if (typeof _this.props.getRef === 'function') {\n        _this.props.getRef(ref);\n      }\n    };\n\n    _this.handleChangeConfig = function (configString) {\n      _this.setState({\n        configString: configString\n      });\n    };\n\n    _this.handleSaveConfig = function () {\n      /* tslint:disable-next-line */\n      if (typeof _this.props.onSaveConfig === 'function') {\n        /* tslint:disable-next-line */\n        _this.props.onSaveConfig(_this.state.configString);\n      }\n    };\n\n    _this.handleSelectEnv = function (env, projectName) {\n      var _a = util_1.getActiveEndpoints(_this.props.config, env, projectName),\n          endpoint = _a.endpoint,\n          subscriptionEndpoint = _a.subscriptionEndpoint,\n          headers = _a.headers;\n\n      _this.setState({\n        activeEnv: env,\n        endpoint: endpoint,\n        headers: headers,\n        subscriptionEndpoint: _this.normalizeSubscriptionUrl(endpoint, subscriptionEndpoint),\n        activeProjectName: projectName\n      });\n    };\n\n    _this.handleChangeEndpoint = function (endpoint) {\n      _this.setState({\n        endpoint: endpoint\n      });\n    };\n\n    _this.handleChangeSubscriptionsEndpoint = function (subscriptionEndpoint) {\n      _this.setState({\n        subscriptionEndpoint: subscriptionEndpoint\n      });\n    };\n\n    global.m = _this;\n    _this.state = _this.mapPropsToState(props);\n\n    _this.removeLoader();\n\n    return _this;\n  }\n\n  PlaygroundWrapper.prototype.mapPropsToState = function (props) {\n    var configIsYaml = props.configString ? this.isConfigYaml(props.configString) : false;\n\n    var _a = this.getInitialActiveEnv(props.config),\n        activeEnv = _a.activeEnv,\n        projectName = _a.projectName;\n\n    var endpoint = props.endpoint || props.endpointUrl || getParameterByName('endpoint') || location.href;\n    var result = this.extractEndpointAndHeaders(endpoint);\n    endpoint = result.endpoint;\n    var headers = result.headers;\n    var subscriptionEndpoint = props.subscriptionEndpoint || getParameterByName('subscriptionEndpoint');\n\n    if (props.configString && props.config && activeEnv) {\n      var endpoints = util_1.getActiveEndpoints(props.config, activeEnv, projectName);\n      endpoint = endpoints.endpoint;\n      subscriptionEndpoint = endpoints.subscriptionEndpoint;\n      headers = endpoints.headers;\n    }\n\n    subscriptionEndpoint = this.normalizeSubscriptionUrl(endpoint, subscriptionEndpoint) || undefined;\n    return {\n      endpoint: this.absolutizeUrl(endpoint),\n      platformToken: props.platformToken || localStorage.getItem('platform-token') || undefined,\n      subscriptionEndpoint: subscriptionEndpoint,\n      configIsYaml: configIsYaml,\n      configString: props.configString,\n      activeEnv: activeEnv,\n      activeProjectName: projectName,\n      headers: headers\n    };\n  };\n\n  PlaygroundWrapper.prototype.extractEndpointAndHeaders = function (endpoint) {\n    var splitted = endpoint.split('?');\n\n    if (splitted.length === 1) {\n      return {\n        endpoint: endpoint\n      };\n    }\n\n    try {\n      var headers = getParameterByName('headers', endpoint);\n\n      if (headers) {\n        return {\n          headers: JSON.parse(headers),\n          endpoint: splitted[0]\n        };\n      }\n    } catch (e) {//\n    }\n\n    return {\n      endpoint: splitted[0]\n    };\n  };\n\n  PlaygroundWrapper.prototype.removeLoader = function () {\n    var loadingWrapper = document.getElementById('loading-wrapper');\n\n    if (loadingWrapper) {\n      loadingWrapper.remove();\n    }\n  };\n\n  PlaygroundWrapper.prototype.normalizeSubscriptionUrl = function (endpoint, subscriptionEndpoint) {\n    if (subscriptionEndpoint) {\n      if (subscriptionEndpoint.startsWith('/')) {\n        var secure = endpoint.includes('https') || location.href.includes('https') ? 's' : '';\n        return \"ws\" + secure + \"://\" + location.host + subscriptionEndpoint;\n      } else {\n        return subscriptionEndpoint.replace(/^http/, 'ws');\n      }\n    }\n\n    return this.getGraphcoolSubscriptionEndpoint(endpoint).replace(/^http/, 'ws');\n  };\n\n  PlaygroundWrapper.prototype.getGraphcoolSubscriptionEndpoint = function (endpoint) {\n    if (endpoint.includes('api.graph.cool')) {\n      return \"wss://subscriptions.graph.cool/v1/\" + endpoint.split('/').slice(-1)[0];\n    }\n\n    return endpoint.replace(/^http/, 'ws');\n  };\n\n  PlaygroundWrapper.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\n    // Reactive props (props that cause a state change upon being changed)\n    if (nextProps.endpoint !== this.props.endpoint || nextProps.endpointUrl !== this.props.endpointUrl || nextProps.subscriptionEndpoint !== this.props.subscriptionEndpoint || nextProps.configString !== this.props.configString || nextProps.platformToken !== this.props.platformToken || nextProps.config !== this.props.config) {\n      this.setState(this.mapPropsToState(nextProps));\n      this.setInitialWorkspace(nextProps);\n    }\n  };\n\n  PlaygroundWrapper.prototype.getInitialActiveEnv = function (config) {\n    if (config) {\n      if (config.extensions && config.extensions.endpoints) {\n        return {\n          activeEnv: Object.keys(config.extensions.endpoints)[0]\n        };\n      }\n\n      if (config.projects) {\n        var projectName = Object.keys(config.projects)[0];\n        var project = config.projects[projectName];\n\n        if (project.extensions && project.extensions.endpoints) {\n          return {\n            activeEnv: Object.keys(project.extensions.endpoints)[0],\n            projectName: projectName\n          };\n        }\n      }\n    }\n\n    return {};\n  };\n\n  PlaygroundWrapper.prototype.isConfigYaml = function (configString) {\n    try {\n      yaml.safeLoad(configString);\n      return true;\n    } catch (e) {//\n    }\n\n    return false;\n  };\n\n  PlaygroundWrapper.prototype.absolutizeUrl = function (url) {\n    if (url.startsWith('/')) {\n      return location.origin + url;\n    }\n\n    return url;\n  };\n\n  PlaygroundWrapper.prototype.UNSAFE_componentWillMount = function () {\n    var platformToken = getParameterByName('platform-token');\n\n    if (platformToken && platformToken.length > 0) {\n      localStorage.setItem('platform-token', platformToken);\n      window.location.replace(window.location.origin + window.location.pathname);\n    }\n  };\n\n  PlaygroundWrapper.prototype.componentDidMount = function () {\n    var _this = this;\n\n    if (this.state.subscriptionEndpoint === '') {\n      this.updateSubscriptionsUrl();\n    }\n\n    setTimeout(function () {\n      _this.removePlaygroundInClass();\n    }, 5000);\n    this.setInitialWorkspace();\n\n    if (this.props.tabs) {\n      this.props.injectTabs(this.props.tabs);\n    } else {\n      var query = getParameterByName('query');\n\n      if (query) {\n        var endpoint = getParameterByName('endpoint') || this.state.endpoint;\n        this.props.injectTabs([{\n          query: query,\n          endpoint: endpoint\n        }]);\n      } else {\n        var tabsString = getParameterByName('tabs');\n\n        if (tabsString) {\n          try {\n            var tabs = JSON.parse(tabsString);\n            this.props.injectTabs(tabs);\n          } catch (e) {//\n          }\n        }\n      }\n    }\n\n    if (this.props.schema) {\n      // in this case it's sdl\n      if (typeof this.props.schema === 'string') {\n        this.setState({\n          schema: graphql_1.buildSchema(this.props.schema)\n        }); // if it's an object, it must be an introspection query\n      } else {\n        this.setState({\n          schema: graphql_1.buildClientSchema(this.props.schema)\n        });\n      }\n    }\n  };\n\n  PlaygroundWrapper.prototype.setInitialWorkspace = function (props) {\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    if (props.config) {\n      var activeEnv = this.getInitialActiveEnv(props.config);\n      var endpoints = util_1.getActiveEndpoints(props.config, activeEnv.activeEnv, activeEnv.projectName);\n      var endpoint = endpoints.endpoint;\n      var subscriptionEndpoint = endpoints.subscriptionEndpoint || this.normalizeSubscriptionUrl(endpoint, endpoints.subscriptionEndpoint);\n      var headers = endpoints.headers;\n      this.setState({\n        endpoint: endpoint,\n        subscriptionEndpoint: subscriptionEndpoint,\n        headers: headers,\n        activeEnv: activeEnv.activeEnv,\n        activeProjectName: activeEnv.projectName\n      });\n    }\n  };\n\n  PlaygroundWrapper.prototype.removePlaygroundInClass = function () {\n    var root = document.getElementById('root');\n\n    if (root) {\n      root.classList.remove('playgroundIn');\n    }\n  };\n\n  PlaygroundWrapper.prototype.render = function () {\n    var title = this.props.setTitle ? /*#__PURE__*/React.createElement(react_helmet_1.Helmet, null, /*#__PURE__*/React.createElement(\"title\", null, this.getTitle())) : null;\n    var defaultHeaders = this.props.headers || {};\n    var stateHeaders = this.state.headers || {};\n\n    var combinedHeaders = __assign(__assign({}, defaultHeaders), stateHeaders);\n\n    var theme = this.props.theme;\n    return /*#__PURE__*/React.createElement(\"div\", null, title, /*#__PURE__*/React.createElement(styled_1.ThemeProvider, {\n      theme: __assign(__assign({}, styled_1.theme), {\n        mode: theme,\n        colours: theme === 'dark' ? theme_1.darkColours : theme_1.lightColours,\n        editorColours: __assign(__assign({}, theme === 'dark' ? theme_1.darkEditorColours : theme_1.lightEditorColours), this.props.codeTheme),\n        settings: this.props.settings\n      })\n    }, /*#__PURE__*/React.createElement(App, null, this.props.config && this.state.activeEnv && /*#__PURE__*/React.createElement(ProjectsSideNav_1[\"default\"], {\n      config: this.props.config,\n      folderName: this.props.folderName || 'GraphQL App',\n      theme: theme,\n      activeEnv: this.state.activeEnv,\n      onSelectEnv: this.handleSelectEnv,\n      onNewWorkspace: this.props.onNewWorkspace,\n      showNewWorkspace: Boolean(this.props.showNewWorkspace),\n      isElectron: Boolean(this.props.isElectron),\n      activeProjectName: this.state.activeProjectName,\n      configPath: this.props.configPath\n    }), /*#__PURE__*/React.createElement(Playground_1[\"default\"], {\n      endpoint: this.state.endpoint,\n      shareEnabled: this.props.shareEnabled,\n      subscriptionEndpoint: this.state.subscriptionEndpoint,\n      shareUrl: this.state.shareUrl,\n      onChangeEndpoint: this.handleChangeEndpoint,\n      onChangeSubscriptionsEndpoint: this.handleChangeSubscriptionsEndpoint,\n      getRef: this.getPlaygroundRef,\n      config: this.props.config,\n      configString: this.state.configString,\n      configIsYaml: this.state.configIsYaml,\n      canSaveConfig: Boolean(this.props.canSaveConfig),\n      onChangeConfig: this.handleChangeConfig,\n      onSaveConfig: this.handleSaveConfig,\n      onUpdateSessionCount: this.handleUpdateSessionCount,\n      fixedEndpoints: Boolean(this.state.configString),\n      fixedEndpoint: this.props.fixedEndpoint,\n      headers: combinedHeaders,\n      configPath: this.props.configPath,\n      workspaceName: this.props.workspaceName || this.state.activeProjectName,\n      createApolloLink: this.props.createApolloLink,\n      schema: this.state.schema\n    }))));\n  };\n\n  PlaygroundWrapper.prototype.getTitle = function () {\n    if (this.state.platformToken || this.state.endpoint.includes('api.graph.cool')) {\n      var projectId = this.getProjectId(this.state.endpoint);\n      var cluster = this.state.endpoint.includes('api.graph.cool') ? 'shared' : 'local';\n      return cluster + \"/\" + projectId + \" - Playground\";\n    }\n\n    return \"Playground - \" + this.state.endpoint;\n  };\n\n  PlaygroundWrapper.prototype.updateSubscriptionsUrl = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var candidates, validCandidate;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            candidates = this.getSubscriptionsUrlCandidated(this.state.endpoint);\n            return [4\n            /*yield*/\n            , find(candidates, function (candidate) {\n              return _this.wsEndpointValid(candidate);\n            })];\n\n          case 1:\n            validCandidate = _a.sent();\n\n            if (validCandidate) {\n              this.setState({\n                subscriptionEndpoint: validCandidate\n              });\n            }\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  PlaygroundWrapper.prototype.getSubscriptionsUrlCandidated = function (endpoint) {\n    var candidates = [];\n    candidates.push(endpoint.replace('https', 'wss').replace('http', 'ws'));\n\n    if (endpoint.includes('graph.cool')) {\n      candidates.push(\"wss://subscriptions.graph.cool/v1/\" + this.getProjectId(endpoint));\n    }\n\n    if (endpoint.includes('/simple/v1/')) {\n      // it's a graphcool local endpoint\n      var host = endpoint.match(/https?:\\/\\/(.*?)\\//);\n      candidates.push(\"ws://\" + host[1] + \"/subscriptions/v1/\" + this.getProjectId(endpoint));\n    }\n\n    return candidates;\n  };\n\n  PlaygroundWrapper.prototype.wsEndpointValid = function (url) {\n    return new Promise(function (resolve) {\n      var socket = new WebSocket(url, 'graphql-ws');\n      socket.addEventListener('open', function (event) {\n        socket.send(JSON.stringify({\n          type: 'connection_init'\n        }));\n      });\n      socket.addEventListener('message', function (event) {\n        var data = JSON.parse(event.data);\n\n        if (data.type === 'connection_ack') {\n          resolve(true);\n        }\n      });\n      socket.addEventListener('error', function (event) {\n        resolve(false);\n      });\n      setTimeout(function () {\n        resolve(false);\n      }, 1000);\n    });\n  };\n\n  PlaygroundWrapper.prototype.getProjectId = function (endpoint) {\n    return endpoint.split('/').slice(-1)[0];\n  };\n\n  return PlaygroundWrapper;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  var theme = ownProps.theme || reducers_1.getTheme(state, ownProps.settings);\n  var settings = reducers_1.getSettings(state);\n  return {\n    theme: theme,\n    settings: settings\n  };\n};\n\nexports[\"default\"] = react_redux_1.connect(mapStateToProps, {\n  injectTabs: actions_1.injectTabs\n})(PlaygroundWrapper);\n\nfunction find(iterable, predicate) {\n  return __awaiter(this, void 0, void 0, function () {\n    var i, element, result;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          i = 0;\n          _a.label = 1;\n\n        case 1:\n          if (!(i < iterable.length)) return [3\n          /*break*/\n          , 4];\n          element = iterable[i];\n          return [4\n          /*yield*/\n          , predicate(element, i)];\n\n        case 2:\n          result = _a.sent();\n\n          if (result) {\n            return [2\n            /*return*/\n            , element];\n          }\n\n          _a.label = 3;\n\n        case 3:\n          i++;\n          return [3\n          /*break*/\n          , 1];\n\n        case 4:\n          return [2\n          /*return*/\n          , null];\n      }\n    });\n  });\n}\n\nvar appearIn = styled_1.keyframes(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  from { \\n    opacity: 0;\\n    transform: translateY(10px);\\n  }\\n  to { \\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n\"], [\"\\n  from { \\n    opacity: 0;\\n    transform: translateY(10px);\\n  }\\n  to { \\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n\"])));\nvar App = styled_1.styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  display: flex;\\n  width: 100%;\\n  opacity: 0;\\n  transform: translateY(10px);\\n  animation: \", \" 0.5s ease-out forwards 0.2s;\\n\"], [\"\\n  display: flex;\\n  width: 100%;\\n  opacity: 0;\\n  transform: translateY(10px);\\n  animation: \", \" 0.5s ease-out forwards 0.2s;\\n\"])), appearIn);\nvar templateObject_1, templateObject_2;"]},"metadata":{},"sourceType":"script"}