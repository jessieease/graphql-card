{"ast":null,"code":"\"use strict\";\n/**\n *  Copyright (c) Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __makeTemplateObject = void 0 && (void 0).__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar onHasCompletion_1 = require(\"./onHasCompletion\");\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar actions_1 = require(\"../../state/sessions/actions\");\n\nvar selectors_1 = require(\"../../state/sessions/selectors\");\n\nvar reselect_1 = require(\"reselect\");\n\nvar styled_1 = require(\"../../styled\");\n/**\n * VariableEditor\n *\n * An instance of CodeMirror for editing variables defined in QueryEditor.\n *\n * Props:\n *\n *   - variableToType: A mapping of variable name to GraphQLType.\n *   - value: The text of the editor.\n *   - onEdit: A function called when the editor changes, given the edited text.\n *   - readOnly: Turns the editor to read-only mode.\n *\n */\n\n\nvar VariableEditor =\n/** @class */\nfunction (_super) {\n  __extends(VariableEditor, _super);\n\n  function VariableEditor(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._onKeyUp = function (cm, event) {\n      var code = event.keyCode;\n\n      if (code >= 65 && code <= 90 || // letters\n      !event.shiftKey && code >= 48 && code <= 57 || // numbers\n      event.shiftKey && code === 189 || // underscore\n      event.shiftKey && code === 222 // \"\n      ) {\n        _this.editor.execCommand('autocomplete');\n      }\n    };\n\n    _this._onEdit = function () {\n      if (!_this.ignoreChangeEvent) {\n        _this.cachedValue = _this.editor.getValue();\n\n        _this.props.onChange(_this.cachedValue);\n      }\n    };\n\n    _this._onHasCompletion = function (cm, data) {\n      onHasCompletion_1[\"default\"](cm, data, _this.props.onHintInformationRender);\n    }; // Keep a cached version of the value, this cache will be updated when the\n    // editor is updated, which can later be used to protect the editor from\n    // unnecessary updates during the update lifecycle.\n\n\n    _this.cachedValue = props.value || '';\n\n    if (_this.props.getRef) {\n      _this.props.getRef(_this);\n    }\n\n    return _this;\n  }\n\n  VariableEditor.prototype.componentDidMount = function () {\n    var _this = this; // Lazily require to ensure requiring GraphiQL outside of a Browser context\n    // does not produce an error.\n\n\n    var CodeMirror = require('codemirror');\n\n    require('codemirror/addon/hint/show-hint');\n\n    require('codemirror/addon/edit/matchbrackets');\n\n    require('codemirror/addon/edit/closebrackets');\n\n    require('codemirror/addon/fold/brace-fold');\n\n    require('codemirror/addon/fold/foldgutter');\n\n    require('codemirror/addon/lint/lint');\n\n    require('codemirror/addon/search/searchcursor');\n\n    require('codemirror/addon/search/jump-to-line');\n\n    require('codemirror/addon/dialog/dialog');\n\n    require('codemirror/keymap/sublime');\n\n    require('codemirror-graphql/variables/hint');\n\n    require('codemirror-graphql/variables/lint');\n\n    require('codemirror-graphql/variables/mode');\n\n    this.editor = CodeMirror(this._node, {\n      value: this.props.value || '',\n      lineNumbers: true,\n      tabSize: 2,\n      mode: 'graphql-variables',\n      theme: 'graphiql',\n      keyMap: 'sublime',\n      autoCloseBrackets: true,\n      matchBrackets: true,\n      showCursorWhenSelecting: true,\n      readOnly: false,\n      foldGutter: {\n        minFoldSize: 4\n      },\n      lint: {\n        variableToType: this.props.variableToType ? this.props.variableToType.toJS() : undefined\n      },\n      hintOptions: {\n        variableToType: this.props.variableToType ? this.props.variableToType.toJS() : undefined,\n        closeOnUnfocus: false,\n        completeSingle: false\n      },\n      gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter'],\n      extraKeys: {\n        'Cmd-Space': function CmdSpace() {\n          return _this.editor.showHint({\n            completeSingle: false\n          });\n        },\n        'Ctrl-Space': function CtrlSpace() {\n          return _this.editor.showHint({\n            completeSingle: false\n          });\n        },\n        'Alt-Space': function AltSpace() {\n          return _this.editor.showHint({\n            completeSingle: false\n          });\n        },\n        'Shift-Space': function ShiftSpace() {\n          return _this.editor.showHint({\n            completeSingle: false\n          });\n        },\n        'Cmd-Enter': function CmdEnter() {\n          if (_this.props.onRunQuery) {\n            _this.props.onRunQuery();\n          }\n        },\n        'Ctrl-Enter': function CtrlEnter() {\n          if (_this.props.onRunQuery) {\n            _this.props.onRunQuery();\n          }\n        },\n        'Shift-Ctrl-P': function ShiftCtrlP() {\n          if (_this.props.prettifyQuery) {\n            _this.props.prettifyQuery();\n          }\n        },\n        // Persistent search box in Query Editor\n        'Cmd-F': 'findPersistent',\n        'Ctrl-F': 'findPersistent',\n        // Editor improvements\n        'Ctrl-Left': 'goSubwordLeft',\n        'Ctrl-Right': 'goSubwordRight',\n        'Alt-Left': 'goGroupLeft',\n        'Alt-Right': 'goGroupRight'\n      }\n    });\n    this.editor.on('change', this._onEdit);\n    this.editor.on('keyup', this._onKeyUp);\n    this.editor.on('hasCompletion', this._onHasCompletion);\n  };\n\n  VariableEditor.prototype.componentDidUpdate = function (prevProps) {\n    var CodeMirror = require('codemirror'); // Ensure the changes caused by this update are not interpretted as\n    // user-input changes which could otherwise result in an infinite\n    // event loop.\n\n\n    this.ignoreChangeEvent = true;\n\n    if (this.props.variableToType !== prevProps.variableToType) {\n      this.editor.options.lint.variableToType = this.props.variableToType ? this.props.variableToType.toJS() : undefined;\n      this.editor.options.hintOptions.variableToType = this.props.variableToType ? this.props.variableToType.toJS() : undefined;\n      CodeMirror.signal(this.editor, 'change', this.editor);\n    }\n\n    if (this.props.value !== prevProps.value && this.props.value !== this.cachedValue) {\n      this.cachedValue = this.props.value;\n      this.editor.setValue(this.props.value);\n    }\n\n    this.ignoreChangeEvent = false;\n  };\n\n  VariableEditor.prototype.componentWillUnmount = function () {\n    this.editor.off('change', this._onEdit);\n    this.editor.off('keyup', this._onKeyUp);\n    this.editor.off('hasCompletion', this._onHasCompletion);\n    this.editor = null;\n  };\n\n  VariableEditor.prototype.render = function () {\n    var _this = this;\n\n    return /*#__PURE__*/React.createElement(Editor, {\n      ref: function ref(node) {\n        _this._node = node;\n      }\n    });\n  };\n  /**\n   * Public API for retrieving the CodeMirror instance from this\n   * React component.\n   */\n\n\n  VariableEditor.prototype.getCodeMirror = function () {\n    return this.editor;\n  };\n  /**\n   * Public API for retrieving the DOM client height for this component.\n   */\n\n\n  VariableEditor.prototype.getClientHeight = function () {\n    return this._node && this._node.clientHeight;\n  };\n\n  return VariableEditor;\n}(React.PureComponent);\n\nvar mapStateToVariablesProps = reselect_1.createStructuredSelector({\n  value: selectors_1.getVariables,\n  variableToType: selectors_1.getVariableToType\n});\nexports.VariableEditorComponent = react_redux_1.connect(mapStateToVariablesProps, {\n  onChange: actions_1.editVariables\n})(VariableEditor);\nvar mapStateToHeadersProps = reselect_1.createStructuredSelector({\n  value: selectors_1.getHeaders\n});\nexports.HeadersEditorComponent = react_redux_1.connect(mapStateToHeadersProps, {\n  onChange: actions_1.editHeaders\n})(VariableEditor);\nvar Editor = styled_1.styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  flex: 1;\\n  height: 100%;\\n  position: relative;\\n\"], [\"\\n  flex: 1;\\n  height: 100%;\\n  position: relative;\\n\"])));\nvar templateObject_1;","map":{"version":3,"sources":["/Users/wubo/Desktop/card-design/card-design/node_modules/graphql-playground-react/lib/components/Playground/VariableEditor.js"],"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__makeTemplateObject","cooked","raw","defineProperty","value","exports","React","require","onHasCompletion_1","react_redux_1","actions_1","selectors_1","reselect_1","styled_1","VariableEditor","_super","props","_this","call","_onKeyUp","cm","event","code","keyCode","shiftKey","editor","execCommand","_onEdit","ignoreChangeEvent","cachedValue","getValue","onChange","_onHasCompletion","data","onHintInformationRender","getRef","componentDidMount","CodeMirror","_node","lineNumbers","tabSize","mode","theme","keyMap","autoCloseBrackets","matchBrackets","showCursorWhenSelecting","readOnly","foldGutter","minFoldSize","lint","variableToType","toJS","undefined","hintOptions","closeOnUnfocus","completeSingle","gutters","extraKeys","CmdSpace","showHint","CtrlSpace","AltSpace","ShiftSpace","CmdEnter","onRunQuery","CtrlEnter","ShiftCtrlP","prettifyQuery","on","componentDidUpdate","prevProps","options","signal","setValue","componentWillUnmount","off","render","createElement","Editor","ref","node","getCodeMirror","getClientHeight","clientHeight","PureComponent","mapStateToVariablesProps","createStructuredSelector","getVariables","getVariableToType","VariableEditorComponent","connect","editVariables","mapStateToHeadersProps","getHeaders","HeadersEditorComponent","editHeaders","styled","div","templateObject_1"],"mappings":"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","sourcesContent":["\"use strict\";\n/**\n *  Copyright (c) Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __makeTemplateObject = void 0 && (void 0).__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar onHasCompletion_1 = require(\"./onHasCompletion\");\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar actions_1 = require(\"../../state/sessions/actions\");\n\nvar selectors_1 = require(\"../../state/sessions/selectors\");\n\nvar reselect_1 = require(\"reselect\");\n\nvar styled_1 = require(\"../../styled\");\n/**\n * VariableEditor\n *\n * An instance of CodeMirror for editing variables defined in QueryEditor.\n *\n * Props:\n *\n *   - variableToType: A mapping of variable name to GraphQLType.\n *   - value: The text of the editor.\n *   - onEdit: A function called when the editor changes, given the edited text.\n *   - readOnly: Turns the editor to read-only mode.\n *\n */\n\n\nvar VariableEditor =\n/** @class */\nfunction (_super) {\n  __extends(VariableEditor, _super);\n\n  function VariableEditor(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._onKeyUp = function (cm, event) {\n      var code = event.keyCode;\n\n      if (code >= 65 && code <= 90 || // letters\n      !event.shiftKey && code >= 48 && code <= 57 || // numbers\n      event.shiftKey && code === 189 || // underscore\n      event.shiftKey && code === 222 // \"\n      ) {\n          _this.editor.execCommand('autocomplete');\n        }\n    };\n\n    _this._onEdit = function () {\n      if (!_this.ignoreChangeEvent) {\n        _this.cachedValue = _this.editor.getValue();\n\n        _this.props.onChange(_this.cachedValue);\n      }\n    };\n\n    _this._onHasCompletion = function (cm, data) {\n      onHasCompletion_1[\"default\"](cm, data, _this.props.onHintInformationRender);\n    }; // Keep a cached version of the value, this cache will be updated when the\n    // editor is updated, which can later be used to protect the editor from\n    // unnecessary updates during the update lifecycle.\n\n\n    _this.cachedValue = props.value || '';\n\n    if (_this.props.getRef) {\n      _this.props.getRef(_this);\n    }\n\n    return _this;\n  }\n\n  VariableEditor.prototype.componentDidMount = function () {\n    var _this = this; // Lazily require to ensure requiring GraphiQL outside of a Browser context\n    // does not produce an error.\n\n\n    var CodeMirror = require('codemirror');\n\n    require('codemirror/addon/hint/show-hint');\n\n    require('codemirror/addon/edit/matchbrackets');\n\n    require('codemirror/addon/edit/closebrackets');\n\n    require('codemirror/addon/fold/brace-fold');\n\n    require('codemirror/addon/fold/foldgutter');\n\n    require('codemirror/addon/lint/lint');\n\n    require('codemirror/addon/search/searchcursor');\n\n    require('codemirror/addon/search/jump-to-line');\n\n    require('codemirror/addon/dialog/dialog');\n\n    require('codemirror/keymap/sublime');\n\n    require('codemirror-graphql/variables/hint');\n\n    require('codemirror-graphql/variables/lint');\n\n    require('codemirror-graphql/variables/mode');\n\n    this.editor = CodeMirror(this._node, {\n      value: this.props.value || '',\n      lineNumbers: true,\n      tabSize: 2,\n      mode: 'graphql-variables',\n      theme: 'graphiql',\n      keyMap: 'sublime',\n      autoCloseBrackets: true,\n      matchBrackets: true,\n      showCursorWhenSelecting: true,\n      readOnly: false,\n      foldGutter: {\n        minFoldSize: 4\n      },\n      lint: {\n        variableToType: this.props.variableToType ? this.props.variableToType.toJS() : undefined\n      },\n      hintOptions: {\n        variableToType: this.props.variableToType ? this.props.variableToType.toJS() : undefined,\n        closeOnUnfocus: false,\n        completeSingle: false\n      },\n      gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter'],\n      extraKeys: {\n        'Cmd-Space': function CmdSpace() {\n          return _this.editor.showHint({\n            completeSingle: false\n          });\n        },\n        'Ctrl-Space': function CtrlSpace() {\n          return _this.editor.showHint({\n            completeSingle: false\n          });\n        },\n        'Alt-Space': function AltSpace() {\n          return _this.editor.showHint({\n            completeSingle: false\n          });\n        },\n        'Shift-Space': function ShiftSpace() {\n          return _this.editor.showHint({\n            completeSingle: false\n          });\n        },\n        'Cmd-Enter': function CmdEnter() {\n          if (_this.props.onRunQuery) {\n            _this.props.onRunQuery();\n          }\n        },\n        'Ctrl-Enter': function CtrlEnter() {\n          if (_this.props.onRunQuery) {\n            _this.props.onRunQuery();\n          }\n        },\n        'Shift-Ctrl-P': function ShiftCtrlP() {\n          if (_this.props.prettifyQuery) {\n            _this.props.prettifyQuery();\n          }\n        },\n        // Persistent search box in Query Editor\n        'Cmd-F': 'findPersistent',\n        'Ctrl-F': 'findPersistent',\n        // Editor improvements\n        'Ctrl-Left': 'goSubwordLeft',\n        'Ctrl-Right': 'goSubwordRight',\n        'Alt-Left': 'goGroupLeft',\n        'Alt-Right': 'goGroupRight'\n      }\n    });\n    this.editor.on('change', this._onEdit);\n    this.editor.on('keyup', this._onKeyUp);\n    this.editor.on('hasCompletion', this._onHasCompletion);\n  };\n\n  VariableEditor.prototype.componentDidUpdate = function (prevProps) {\n    var CodeMirror = require('codemirror'); // Ensure the changes caused by this update are not interpretted as\n    // user-input changes which could otherwise result in an infinite\n    // event loop.\n\n\n    this.ignoreChangeEvent = true;\n\n    if (this.props.variableToType !== prevProps.variableToType) {\n      this.editor.options.lint.variableToType = this.props.variableToType ? this.props.variableToType.toJS() : undefined;\n      this.editor.options.hintOptions.variableToType = this.props.variableToType ? this.props.variableToType.toJS() : undefined;\n      CodeMirror.signal(this.editor, 'change', this.editor);\n    }\n\n    if (this.props.value !== prevProps.value && this.props.value !== this.cachedValue) {\n      this.cachedValue = this.props.value;\n      this.editor.setValue(this.props.value);\n    }\n\n    this.ignoreChangeEvent = false;\n  };\n\n  VariableEditor.prototype.componentWillUnmount = function () {\n    this.editor.off('change', this._onEdit);\n    this.editor.off('keyup', this._onKeyUp);\n    this.editor.off('hasCompletion', this._onHasCompletion);\n    this.editor = null;\n  };\n\n  VariableEditor.prototype.render = function () {\n    var _this = this;\n\n    return /*#__PURE__*/React.createElement(Editor, {\n      ref: function ref(node) {\n        _this._node = node;\n      }\n    });\n  };\n  /**\n   * Public API for retrieving the CodeMirror instance from this\n   * React component.\n   */\n\n\n  VariableEditor.prototype.getCodeMirror = function () {\n    return this.editor;\n  };\n  /**\n   * Public API for retrieving the DOM client height for this component.\n   */\n\n\n  VariableEditor.prototype.getClientHeight = function () {\n    return this._node && this._node.clientHeight;\n  };\n\n  return VariableEditor;\n}(React.PureComponent);\n\nvar mapStateToVariablesProps = reselect_1.createStructuredSelector({\n  value: selectors_1.getVariables,\n  variableToType: selectors_1.getVariableToType\n});\nexports.VariableEditorComponent = react_redux_1.connect(mapStateToVariablesProps, {\n  onChange: actions_1.editVariables\n})(VariableEditor);\nvar mapStateToHeadersProps = reselect_1.createStructuredSelector({\n  value: selectors_1.getHeaders\n});\nexports.HeadersEditorComponent = react_redux_1.connect(mapStateToHeadersProps, {\n  onChange: actions_1.editHeaders\n})(VariableEditor);\nvar Editor = styled_1.styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  flex: 1;\\n  height: 100%;\\n  position: relative;\\n\"], [\"\\n  flex: 1;\\n  height: 100%;\\n  position: relative;\\n\"])));\nvar templateObject_1;"]},"metadata":{},"sourceType":"script"}