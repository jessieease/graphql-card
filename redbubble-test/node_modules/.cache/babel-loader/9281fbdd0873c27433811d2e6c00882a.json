{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nexports.default = sortableContainer;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Manager = require('../Manager');\n\nvar _Manager2 = _interopRequireDefault(_Manager);\n\nvar _utils = require('../utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} // Export Higher Order Sortable Container Component\n\n\nfunction sortableContainer(WrappedComponent) {\n  var _class, _temp;\n\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    withRef: false\n  };\n  return _temp = _class = function (_Component) {\n    _inherits(_class, _Component);\n\n    function _class(props) {\n      _classCallCheck(this, _class);\n\n      var _this = _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).call(this, props));\n\n      _this.handleStart = function (event) {\n        var _this$props = _this.props,\n            distance = _this$props.distance,\n            shouldCancelStart = _this$props.shouldCancelStart;\n\n        if (event.button === 2 || shouldCancelStart(event)) {\n          return false;\n        }\n\n        _this._touched = true;\n        _this._pos = (0, _utils.getPosition)(event);\n        var node = (0, _utils.closest)(event.target, function (el) {\n          return el.sortableInfo != null;\n        });\n\n        if (node && node.sortableInfo && _this.nodeIsChild(node) && !_this.state.sorting) {\n          var useDragHandle = _this.props.useDragHandle;\n          var _node$sortableInfo = node.sortableInfo,\n              index = _node$sortableInfo.index,\n              collection = _node$sortableInfo.collection;\n          if (useDragHandle && !(0, _utils.closest)(event.target, function (el) {\n            return el.sortableHandle != null;\n          })) return;\n          _this.manager.active = {\n            index: index,\n            collection: collection\n          };\n          /*\n          * Fixes a bug in Firefox where the :active state of anchor tags\n          * prevent subsequent 'mousemove' events from being fired\n          * (see https://github.com/clauderic/react-sortable-hoc/issues/118)\n          */\n\n          if (!(0, _utils.isTouchEvent)(event) && event.target.tagName.toLowerCase() === 'a') {\n            event.preventDefault();\n          }\n\n          if (!distance) {\n            if (_this.props.pressDelay === 0) {\n              _this.handlePress(event);\n            } else {\n              _this.pressTimer = setTimeout(function () {\n                return _this.handlePress(event);\n              }, _this.props.pressDelay);\n            }\n          }\n        }\n      };\n\n      _this.nodeIsChild = function (node) {\n        return node.sortableInfo.manager === _this.manager;\n      };\n\n      _this.handleMove = function (event) {\n        var _this$props2 = _this.props,\n            distance = _this$props2.distance,\n            pressThreshold = _this$props2.pressThreshold;\n\n        if (!_this.state.sorting && _this._touched) {\n          var position = (0, _utils.getPosition)(event);\n          var delta = _this._delta = {\n            x: _this._pos.x - position.x,\n            y: _this._pos.y - position.y\n          };\n          var combinedDelta = Math.abs(delta.x) + Math.abs(delta.y);\n\n          if (!distance && (!pressThreshold || pressThreshold && combinedDelta >= pressThreshold)) {\n            clearTimeout(_this.cancelTimer);\n            _this.cancelTimer = setTimeout(_this.cancel, 0);\n          } else if (distance && combinedDelta >= distance && _this.manager.isActive()) {\n            _this.handlePress(event);\n          }\n        }\n      };\n\n      _this.handleEnd = function () {\n        _this._touched = false;\n\n        _this.cancel();\n      };\n\n      _this.cancel = function () {\n        var distance = _this.props.distance;\n        var sorting = _this.state.sorting;\n\n        if (!sorting) {\n          if (!distance) {\n            clearTimeout(_this.pressTimer);\n          }\n\n          _this.manager.active = null;\n        }\n      };\n\n      _this.handlePress = function (event) {\n        var active = _this.manager.getActive();\n\n        if (active) {\n          var _this$props3 = _this.props,\n              axis = _this$props3.axis,\n              getHelperDimensions = _this$props3.getHelperDimensions,\n              helperClass = _this$props3.helperClass,\n              hideSortableGhost = _this$props3.hideSortableGhost,\n              onSortStart = _this$props3.onSortStart,\n              useWindowAsScrollContainer = _this$props3.useWindowAsScrollContainer;\n          var node = active.node,\n              collection = active.collection;\n          var index = node.sortableInfo.index;\n          var margin = (0, _utils.getElementMargin)(node);\n\n          var containerBoundingRect = _this.container.getBoundingClientRect();\n\n          var dimensions = getHelperDimensions({\n            index: index,\n            node: node,\n            collection: collection\n          });\n          _this.node = node;\n          _this.margin = margin;\n          _this.width = dimensions.width;\n          _this.height = dimensions.height;\n          _this.marginOffset = {\n            x: _this.margin.left + _this.margin.right,\n            y: Math.max(_this.margin.top, _this.margin.bottom)\n          };\n          _this.boundingClientRect = node.getBoundingClientRect();\n          _this.containerBoundingRect = containerBoundingRect;\n          _this.index = index;\n          _this.newIndex = index;\n          _this.axis = {\n            x: axis.indexOf('x') >= 0,\n            y: axis.indexOf('y') >= 0\n          };\n          _this.offsetEdge = (0, _utils.getEdgeOffset)(node, _this.container);\n          _this.initialOffset = (0, _utils.getPosition)(event);\n          _this.initialScroll = {\n            top: _this.container.scrollTop,\n            left: _this.container.scrollLeft\n          };\n          _this.initialWindowScroll = {\n            top: window.pageYOffset,\n            left: window.pageXOffset\n          };\n          var fields = node.querySelectorAll('input, textarea, select');\n          var clonedNode = node.cloneNode(true);\n          var clonedFields = [].concat(_toConsumableArray(clonedNode.querySelectorAll('input, textarea, select'))); // Convert NodeList to Array\n\n          clonedFields.forEach(function (field, index) {\n            if (field.type !== 'file' && fields[index]) {\n              field.value = fields[index].value;\n            }\n          });\n          _this.helper = _this.document.body.appendChild(clonedNode);\n          _this.helper.style.position = 'fixed';\n          _this.helper.style.top = _this.boundingClientRect.top - margin.top + 'px';\n          _this.helper.style.left = _this.boundingClientRect.left - margin.left + 'px';\n          _this.helper.style.width = _this.width + 'px';\n          _this.helper.style.height = _this.height + 'px';\n          _this.helper.style.boxSizing = 'border-box';\n          _this.helper.style.pointerEvents = 'none';\n\n          if (hideSortableGhost) {\n            _this.sortableGhost = node;\n            node.style.visibility = 'hidden';\n            node.style.opacity = 0;\n          }\n\n          _this.minTranslate = {};\n          _this.maxTranslate = {};\n\n          if (_this.axis.x) {\n            _this.minTranslate.x = (useWindowAsScrollContainer ? 0 : containerBoundingRect.left) - _this.boundingClientRect.left - _this.width / 2;\n            _this.maxTranslate.x = (useWindowAsScrollContainer ? _this.contentWindow.innerWidth : containerBoundingRect.left + containerBoundingRect.width) - _this.boundingClientRect.left - _this.width / 2;\n          }\n\n          if (_this.axis.y) {\n            _this.minTranslate.y = (useWindowAsScrollContainer ? 0 : containerBoundingRect.top) - _this.boundingClientRect.top - _this.height / 2;\n            _this.maxTranslate.y = (useWindowAsScrollContainer ? _this.contentWindow.innerHeight : containerBoundingRect.top + containerBoundingRect.height) - _this.boundingClientRect.top - _this.height / 2;\n          }\n\n          if (helperClass) {\n            var _this$helper$classLis;\n\n            (_this$helper$classLis = _this.helper.classList).add.apply(_this$helper$classLis, _toConsumableArray(helperClass.split(' ')));\n          }\n\n          _this.listenerNode = event.touches ? node : _this.contentWindow;\n\n          _utils.events.move.forEach(function (eventName) {\n            return _this.listenerNode.addEventListener(eventName, _this.handleSortMove, false);\n          });\n\n          _utils.events.end.forEach(function (eventName) {\n            return _this.listenerNode.addEventListener(eventName, _this.handleSortEnd, false);\n          });\n\n          _this.setState({\n            sorting: true,\n            sortingIndex: index\n          });\n\n          if (onSortStart) {\n            onSortStart({\n              node: node,\n              index: index,\n              collection: collection\n            }, event);\n          }\n        }\n      };\n\n      _this.handleSortMove = function (event) {\n        var onSortMove = _this.props.onSortMove;\n        event.preventDefault(); // Prevent scrolling on mobile\n\n        _this.updatePosition(event);\n\n        _this.animateNodes();\n\n        _this.autoscroll();\n\n        if (onSortMove) {\n          onSortMove(event);\n        }\n      };\n\n      _this.handleSortEnd = function (event) {\n        var _this$props4 = _this.props,\n            hideSortableGhost = _this$props4.hideSortableGhost,\n            onSortEnd = _this$props4.onSortEnd;\n        var collection = _this.manager.active.collection; // Remove the event listeners if the node is still in the DOM\n\n        if (_this.listenerNode) {\n          _utils.events.move.forEach(function (eventName) {\n            return _this.listenerNode.removeEventListener(eventName, _this.handleSortMove);\n          });\n\n          _utils.events.end.forEach(function (eventName) {\n            return _this.listenerNode.removeEventListener(eventName, _this.handleSortEnd);\n          });\n        } // Remove the helper from the DOM\n\n\n        _this.helper.parentNode.removeChild(_this.helper);\n\n        if (hideSortableGhost && _this.sortableGhost) {\n          _this.sortableGhost.style.visibility = '';\n          _this.sortableGhost.style.opacity = '';\n        }\n\n        var nodes = _this.manager.refs[collection];\n\n        for (var i = 0, len = nodes.length; i < len; i++) {\n          var node = nodes[i];\n          var el = node.node; // Clear the cached offsetTop / offsetLeft value\n\n          node.edgeOffset = null; // Remove the transforms / transitions\n\n          el.style[_utils.vendorPrefix + 'Transform'] = '';\n          el.style[_utils.vendorPrefix + 'TransitionDuration'] = '';\n        } // Stop autoscroll\n\n\n        clearInterval(_this.autoscrollInterval);\n        _this.autoscrollInterval = null; // Update state\n\n        _this.manager.active = null;\n\n        _this.setState({\n          sorting: false,\n          sortingIndex: null\n        });\n\n        if (typeof onSortEnd === 'function') {\n          onSortEnd({\n            oldIndex: _this.index,\n            newIndex: _this.newIndex,\n            collection: collection\n          }, event);\n        }\n\n        _this._touched = false;\n      };\n\n      _this.autoscroll = function () {\n        var translate = _this.translate;\n        var direction = {\n          x: 0,\n          y: 0\n        };\n        var speed = {\n          x: 1,\n          y: 1\n        };\n        var acceleration = {\n          x: 10,\n          y: 10\n        };\n\n        if (translate.y >= _this.maxTranslate.y - _this.height / 2) {\n          direction.y = 1; // Scroll Down\n\n          speed.y = acceleration.y * Math.abs((_this.maxTranslate.y - _this.height / 2 - translate.y) / _this.height);\n        } else if (translate.x >= _this.maxTranslate.x - _this.width / 2) {\n          direction.x = 1; // Scroll Right\n\n          speed.x = acceleration.x * Math.abs((_this.maxTranslate.x - _this.width / 2 - translate.x) / _this.width);\n        } else if (translate.y <= _this.minTranslate.y + _this.height / 2) {\n          direction.y = -1; // Scroll Up\n\n          speed.y = acceleration.y * Math.abs((translate.y - _this.height / 2 - _this.minTranslate.y) / _this.height);\n        } else if (translate.x <= _this.minTranslate.x + _this.width / 2) {\n          direction.x = -1; // Scroll Left\n\n          speed.x = acceleration.x * Math.abs((translate.x - _this.width / 2 - _this.minTranslate.x) / _this.width);\n        }\n\n        if (_this.autoscrollInterval) {\n          clearInterval(_this.autoscrollInterval);\n          _this.autoscrollInterval = null;\n          _this.isAutoScrolling = false;\n        }\n\n        if (direction.x !== 0 || direction.y !== 0) {\n          _this.autoscrollInterval = setInterval(function () {\n            _this.isAutoScrolling = true;\n            var offset = {\n              left: 1 * speed.x * direction.x,\n              top: 1 * speed.y * direction.y\n            };\n            _this.scrollContainer.scrollTop += offset.top;\n            _this.scrollContainer.scrollLeft += offset.left;\n            _this.translate.x += offset.left;\n            _this.translate.y += offset.top;\n\n            _this.animateNodes();\n          }, 5);\n        }\n      };\n\n      _this.manager = new _Manager2.default();\n      _this.events = {\n        start: _this.handleStart,\n        move: _this.handleMove,\n        end: _this.handleEnd\n      };\n      (0, _invariant2.default)(!(props.distance && props.pressDelay), 'Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.');\n      _this.state = {};\n      return _this;\n    }\n\n    _createClass(_class, [{\n      key: 'getChildContext',\n      value: function getChildContext() {\n        return {\n          manager: this.manager\n        };\n      }\n    }, {\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        var useWindowAsScrollContainer = this.props.useWindowAsScrollContainer;\n        /*\n         *  Set our own default rather than using defaultProps because Jest\n         *  snapshots will serialize window, causing a RangeError\n         *  https://github.com/clauderic/react-sortable-hoc/issues/249\n         */\n\n        var container = this.getContainer();\n        Promise.resolve(container).then(function (containerNode) {\n          _this2.container = containerNode;\n          _this2.document = _this2.container.ownerDocument || document;\n          var contentWindow = _this2.props.contentWindow || _this2.document.defaultView || window;\n          _this2.contentWindow = typeof contentWindow === 'function' ? contentWindow() : contentWindow;\n          _this2.scrollContainer = useWindowAsScrollContainer ? _this2.document.scrollingElement || _this2.document.documentElement : _this2.container;\n\n          var _loop = function _loop(key) {\n            if (_this2.events.hasOwnProperty(key)) {\n              _utils.events[key].forEach(function (eventName) {\n                return _this2.container.addEventListener(eventName, _this2.events[key], false);\n              });\n            }\n          };\n\n          for (var key in _this2.events) {\n            _loop(key);\n          }\n        });\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        var _this3 = this;\n\n        if (this.container) {\n          var _loop2 = function _loop2(key) {\n            if (_this3.events.hasOwnProperty(key)) {\n              _utils.events[key].forEach(function (eventName) {\n                return _this3.container.removeEventListener(eventName, _this3.events[key]);\n              });\n            }\n          };\n\n          for (var key in this.events) {\n            _loop2(key);\n          }\n        }\n      }\n    }, {\n      key: 'getLockPixelOffsets',\n      value: function getLockPixelOffsets() {\n        var width = this.width,\n            height = this.height;\n        var lockOffset = this.props.lockOffset;\n        var offsets = Array.isArray(lockOffset) ? lockOffset : [lockOffset, lockOffset];\n        (0, _invariant2.default)(offsets.length === 2, 'lockOffset prop of SortableContainer should be a single ' + 'value or an array of exactly two values. Given %s', lockOffset);\n\n        var _offsets = _slicedToArray(offsets, 2),\n            minLockOffset = _offsets[0],\n            maxLockOffset = _offsets[1];\n\n        return [(0, _utils.getLockPixelOffset)({\n          lockOffset: minLockOffset,\n          width: width,\n          height: height\n        }), (0, _utils.getLockPixelOffset)({\n          lockOffset: maxLockOffset,\n          width: width,\n          height: height\n        })];\n      }\n    }, {\n      key: 'updatePosition',\n      value: function updatePosition(event) {\n        var _props = this.props,\n            lockAxis = _props.lockAxis,\n            lockToContainerEdges = _props.lockToContainerEdges;\n        var offset = (0, _utils.getPosition)(event);\n        var translate = {\n          x: offset.x - this.initialOffset.x,\n          y: offset.y - this.initialOffset.y\n        }; // Adjust for window scroll\n\n        translate.y -= window.pageYOffset - this.initialWindowScroll.top;\n        translate.x -= window.pageXOffset - this.initialWindowScroll.left;\n        this.translate = translate;\n\n        if (lockToContainerEdges) {\n          var _getLockPixelOffsets = this.getLockPixelOffsets(),\n              _getLockPixelOffsets2 = _slicedToArray(_getLockPixelOffsets, 2),\n              minLockOffset = _getLockPixelOffsets2[0],\n              maxLockOffset = _getLockPixelOffsets2[1];\n\n          var minOffset = {\n            x: this.width / 2 - minLockOffset.x,\n            y: this.height / 2 - minLockOffset.y\n          };\n          var maxOffset = {\n            x: this.width / 2 - maxLockOffset.x,\n            y: this.height / 2 - maxLockOffset.y\n          };\n          translate.x = (0, _utils.limit)(this.minTranslate.x + minOffset.x, this.maxTranslate.x - maxOffset.x, translate.x);\n          translate.y = (0, _utils.limit)(this.minTranslate.y + minOffset.y, this.maxTranslate.y - maxOffset.y, translate.y);\n        }\n\n        if (lockAxis === 'x') {\n          translate.y = 0;\n        } else if (lockAxis === 'y') {\n          translate.x = 0;\n        }\n\n        this.helper.style[_utils.vendorPrefix + 'Transform'] = 'translate3d(' + translate.x + 'px,' + translate.y + 'px, 0)';\n      }\n    }, {\n      key: 'animateNodes',\n      value: function animateNodes() {\n        var _props2 = this.props,\n            transitionDuration = _props2.transitionDuration,\n            hideSortableGhost = _props2.hideSortableGhost,\n            onSortOver = _props2.onSortOver;\n        var nodes = this.manager.getOrderedRefs();\n        var containerScrollDelta = {\n          left: this.container.scrollLeft - this.initialScroll.left,\n          top: this.container.scrollTop - this.initialScroll.top\n        };\n        var sortingOffset = {\n          left: this.offsetEdge.left + this.translate.x + containerScrollDelta.left,\n          top: this.offsetEdge.top + this.translate.y + containerScrollDelta.top\n        };\n        var windowScrollDelta = {\n          top: window.pageYOffset - this.initialWindowScroll.top,\n          left: window.pageXOffset - this.initialWindowScroll.left\n        };\n        var prevIndex = this.newIndex;\n        this.newIndex = null;\n\n        for (var i = 0, len = nodes.length; i < len; i++) {\n          var node = nodes[i].node;\n          var index = node.sortableInfo.index;\n          var width = node.offsetWidth;\n          var height = node.offsetHeight;\n          var offset = {\n            width: this.width > width ? width / 2 : this.width / 2,\n            height: this.height > height ? height / 2 : this.height / 2\n          };\n          var translate = {\n            x: 0,\n            y: 0\n          };\n          var edgeOffset = nodes[i].edgeOffset; // If we haven't cached the node's offsetTop / offsetLeft value\n\n          if (!edgeOffset) {\n            nodes[i].edgeOffset = edgeOffset = (0, _utils.getEdgeOffset)(node, this.container);\n          } // Get a reference to the next and previous node\n\n\n          var nextNode = i < nodes.length - 1 && nodes[i + 1];\n          var prevNode = i > 0 && nodes[i - 1]; // Also cache the next node's edge offset if needed.\n          // We need this for calculating the animation in a grid setup\n\n          if (nextNode && !nextNode.edgeOffset) {\n            nextNode.edgeOffset = (0, _utils.getEdgeOffset)(nextNode.node, this.container);\n          } // If the node is the one we're currently animating, skip it\n\n\n          if (index === this.index) {\n            if (hideSortableGhost) {\n              /*\n              * With windowing libraries such as `react-virtualized`, the sortableGhost\n              * node may change while scrolling down and then back up (or vice-versa),\n              * so we need to update the reference to the new node just to be safe.\n              */\n              this.sortableGhost = node;\n              node.style.visibility = 'hidden';\n              node.style.opacity = 0;\n            }\n\n            continue;\n          }\n\n          if (transitionDuration) {\n            node.style[_utils.vendorPrefix + 'TransitionDuration'] = transitionDuration + 'ms';\n          }\n\n          if (this.axis.x) {\n            if (this.axis.y) {\n              // Calculations for a grid setup\n              if (index < this.index && (sortingOffset.left + windowScrollDelta.left - offset.width <= edgeOffset.left && sortingOffset.top + windowScrollDelta.top <= edgeOffset.top + offset.height || sortingOffset.top + windowScrollDelta.top + offset.height <= edgeOffset.top)) {\n                // If the current node is to the left on the same row, or above the node that's being dragged\n                // then move it to the right\n                translate.x = this.width + this.marginOffset.x;\n\n                if (edgeOffset.left + translate.x > this.containerBoundingRect.width - offset.width) {\n                  // If it moves passed the right bounds, then animate it to the first position of the next row.\n                  // We just use the offset of the next node to calculate where to move, because that node's original position\n                  // is exactly where we want to go\n                  translate.x = nextNode.edgeOffset.left - edgeOffset.left;\n                  translate.y = nextNode.edgeOffset.top - edgeOffset.top;\n                }\n\n                if (this.newIndex === null) {\n                  this.newIndex = index;\n                }\n              } else if (index > this.index && (sortingOffset.left + windowScrollDelta.left + offset.width >= edgeOffset.left && sortingOffset.top + windowScrollDelta.top + offset.height >= edgeOffset.top || sortingOffset.top + windowScrollDelta.top + offset.height >= edgeOffset.top + height)) {\n                // If the current node is to the right on the same row, or below the node that's being dragged\n                // then move it to the left\n                translate.x = -(this.width + this.marginOffset.x);\n\n                if (edgeOffset.left + translate.x < this.containerBoundingRect.left + offset.width) {\n                  // If it moves passed the left bounds, then animate it to the last position of the previous row.\n                  // We just use the offset of the previous node to calculate where to move, because that node's original position\n                  // is exactly where we want to go\n                  translate.x = prevNode.edgeOffset.left - edgeOffset.left;\n                  translate.y = prevNode.edgeOffset.top - edgeOffset.top;\n                }\n\n                this.newIndex = index;\n              }\n            } else {\n              if (index > this.index && sortingOffset.left + windowScrollDelta.left + offset.width >= edgeOffset.left) {\n                translate.x = -(this.width + this.marginOffset.x);\n                this.newIndex = index;\n              } else if (index < this.index && sortingOffset.left + windowScrollDelta.left <= edgeOffset.left + offset.width) {\n                translate.x = this.width + this.marginOffset.x;\n\n                if (this.newIndex == null) {\n                  this.newIndex = index;\n                }\n              }\n            }\n          } else if (this.axis.y) {\n            if (index > this.index && sortingOffset.top + windowScrollDelta.top + offset.height >= edgeOffset.top) {\n              translate.y = -(this.height + this.marginOffset.y);\n              this.newIndex = index;\n            } else if (index < this.index && sortingOffset.top + windowScrollDelta.top <= edgeOffset.top + offset.height) {\n              translate.y = this.height + this.marginOffset.y;\n\n              if (this.newIndex == null) {\n                this.newIndex = index;\n              }\n            }\n          }\n\n          node.style[_utils.vendorPrefix + 'Transform'] = 'translate3d(' + translate.x + 'px,' + translate.y + 'px,0)';\n        }\n\n        if (this.newIndex == null) {\n          this.newIndex = this.index;\n        }\n\n        if (onSortOver && this.newIndex !== prevIndex) {\n          onSortOver({\n            newIndex: this.newIndex,\n            oldIndex: prevIndex,\n            index: this.index,\n            collection: this.manager.active.collection\n          });\n        }\n      }\n    }, {\n      key: 'getWrappedInstance',\n      value: function getWrappedInstance() {\n        (0, _invariant2.default)(config.withRef, 'To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call');\n        return this.refs.wrappedInstance;\n      }\n    }, {\n      key: 'getContainer',\n      value: function getContainer() {\n        var getContainer = this.props.getContainer;\n\n        if (typeof getContainer !== 'function') {\n          return (0, _reactDom.findDOMNode)(this);\n        }\n\n        return getContainer(config.withRef ? this.getWrappedInstance() : undefined);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var ref = config.withRef ? 'wrappedInstance' : null;\n        return _react2.default.createElement(WrappedComponent, _extends({\n          ref: ref\n        }, (0, _utils.omit)(this.props, 'contentWindow', 'useWindowAsScrollContainer', 'distance', 'helperClass', 'hideSortableGhost', 'transitionDuration', 'useDragHandle', 'pressDelay', 'pressThreshold', 'shouldCancelStart', 'onSortStart', 'onSortMove', 'onSortEnd', 'axis', 'lockAxis', 'lockOffset', 'lockToContainerEdges', 'getContainer', 'getHelperDimensions')));\n      }\n    }]);\n\n    return _class;\n  }(_react.Component), _class.displayName = (0, _utils.provideDisplayName)('sortableList', WrappedComponent), _class.defaultProps = {\n    axis: 'y',\n    transitionDuration: 300,\n    pressDelay: 0,\n    pressThreshold: 5,\n    distance: 0,\n    useWindowAsScrollContainer: false,\n    hideSortableGhost: true,\n    shouldCancelStart: function shouldCancelStart(e) {\n      // Cancel sorting if the event target is an `input`, `textarea`, `select` or `option`\n      var disabledElements = ['input', 'textarea', 'select', 'option', 'button'];\n\n      if (disabledElements.indexOf(e.target.tagName.toLowerCase()) !== -1) {\n        return true; // Return true to cancel sorting\n      }\n    },\n    lockToContainerEdges: false,\n    lockOffset: '50%',\n    getHelperDimensions: function getHelperDimensions(_ref) {\n      var node = _ref.node;\n      return {\n        width: node.offsetWidth,\n        height: node.offsetHeight\n      };\n    }\n  }, _class.propTypes = {\n    axis: _propTypes2.default.oneOf(['x', 'y', 'xy']),\n    distance: _propTypes2.default.number,\n    lockAxis: _propTypes2.default.string,\n    helperClass: _propTypes2.default.string,\n    transitionDuration: _propTypes2.default.number,\n    contentWindow: _propTypes2.default.any,\n    onSortStart: _propTypes2.default.func,\n    onSortMove: _propTypes2.default.func,\n    onSortOver: _propTypes2.default.func,\n    onSortEnd: _propTypes2.default.func,\n    shouldCancelStart: _propTypes2.default.func,\n    pressDelay: _propTypes2.default.number,\n    useDragHandle: _propTypes2.default.bool,\n    useWindowAsScrollContainer: _propTypes2.default.bool,\n    hideSortableGhost: _propTypes2.default.bool,\n    lockToContainerEdges: _propTypes2.default.bool,\n    lockOffset: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string, _propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]))]),\n    getContainer: _propTypes2.default.func,\n    getHelperDimensions: _propTypes2.default.func\n  }, _class.childContextTypes = {\n    manager: _propTypes2.default.object.isRequired\n  }, _temp;\n}","map":{"version":3,"sources":["/Users/wubo/Desktop/card-design/card-design/node_modules/graphql-playground-react/node_modules/react-sortable-hoc/dist/commonjs/SortableContainer/index.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","err","Array","isArray","TypeError","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","default","sortableContainer","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_reactDom","_invariant","_invariant2","_Manager","_Manager2","_utils","obj","__esModule","_toConsumableArray","arr2","from","_classCallCheck","instance","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","WrappedComponent","_class","_temp","config","withRef","_Component","_this","getPrototypeOf","handleStart","event","_this$props","distance","shouldCancelStart","button","_touched","_pos","getPosition","node","closest","el","sortableInfo","nodeIsChild","state","sorting","useDragHandle","_node$sortableInfo","index","collection","sortableHandle","manager","active","isTouchEvent","tagName","toLowerCase","preventDefault","pressDelay","handlePress","pressTimer","setTimeout","handleMove","_this$props2","pressThreshold","position","delta","_delta","x","y","combinedDelta","Math","abs","clearTimeout","cancelTimer","cancel","isActive","handleEnd","getActive","_this$props3","axis","getHelperDimensions","helperClass","hideSortableGhost","onSortStart","useWindowAsScrollContainer","margin","getElementMargin","containerBoundingRect","container","getBoundingClientRect","dimensions","width","height","marginOffset","left","right","max","top","bottom","boundingClientRect","newIndex","indexOf","offsetEdge","getEdgeOffset","initialOffset","initialScroll","scrollTop","scrollLeft","initialWindowScroll","window","pageYOffset","pageXOffset","fields","querySelectorAll","clonedNode","cloneNode","clonedFields","concat","forEach","field","type","helper","document","body","appendChild","style","boxSizing","pointerEvents","sortableGhost","visibility","opacity","minTranslate","maxTranslate","contentWindow","innerWidth","innerHeight","_this$helper$classLis","classList","add","apply","split","listenerNode","touches","events","move","eventName","addEventListener","handleSortMove","end","handleSortEnd","setState","sortingIndex","onSortMove","updatePosition","animateNodes","autoscroll","_this$props4","onSortEnd","removeEventListener","parentNode","removeChild","nodes","refs","len","edgeOffset","vendorPrefix","clearInterval","autoscrollInterval","oldIndex","translate","direction","speed","acceleration","isAutoScrolling","setInterval","offset","scrollContainer","start","getChildContext","componentDidMount","_this2","getContainer","Promise","resolve","then","containerNode","ownerDocument","defaultView","scrollingElement","documentElement","_loop","componentWillUnmount","_this3","_loop2","getLockPixelOffsets","lockOffset","offsets","_offsets","minLockOffset","maxLockOffset","getLockPixelOffset","_props","lockAxis","lockToContainerEdges","_getLockPixelOffsets","_getLockPixelOffsets2","minOffset","maxOffset","limit","_props2","transitionDuration","onSortOver","getOrderedRefs","containerScrollDelta","sortingOffset","windowScrollDelta","prevIndex","offsetWidth","offsetHeight","nextNode","prevNode","getWrappedInstance","wrappedInstance","findDOMNode","render","ref","createElement","omit","Component","displayName","provideDisplayName","defaultProps","e","disabledElements","_ref","propTypes","oneOf","number","string","any","func","bool","oneOfType","arrayOf","childContextTypes","object","isRequired"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = sortableContainer;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Manager = require('../Manager');\n\nvar _Manager2 = _interopRequireDefault(_Manager);\n\nvar _utils = require('../utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// Export Higher Order Sortable Container Component\nfunction sortableContainer(WrappedComponent) {\n  var _class, _temp;\n\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { withRef: false };\n\n  return _temp = _class = function (_Component) {\n    _inherits(_class, _Component);\n\n    function _class(props) {\n      _classCallCheck(this, _class);\n\n      var _this = _possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).call(this, props));\n\n      _this.handleStart = function (event) {\n        var _this$props = _this.props,\n            distance = _this$props.distance,\n            shouldCancelStart = _this$props.shouldCancelStart;\n\n\n        if (event.button === 2 || shouldCancelStart(event)) {\n          return false;\n        }\n\n        _this._touched = true;\n        _this._pos = (0, _utils.getPosition)(event);\n\n        var node = (0, _utils.closest)(event.target, function (el) {\n          return el.sortableInfo != null;\n        });\n\n        if (node && node.sortableInfo && _this.nodeIsChild(node) && !_this.state.sorting) {\n          var useDragHandle = _this.props.useDragHandle;\n          var _node$sortableInfo = node.sortableInfo,\n              index = _node$sortableInfo.index,\n              collection = _node$sortableInfo.collection;\n\n\n          if (useDragHandle && !(0, _utils.closest)(event.target, function (el) {\n            return el.sortableHandle != null;\n          })) return;\n\n          _this.manager.active = { index: index, collection: collection };\n\n          /*\n          * Fixes a bug in Firefox where the :active state of anchor tags\n          * prevent subsequent 'mousemove' events from being fired\n          * (see https://github.com/clauderic/react-sortable-hoc/issues/118)\n          */\n          if (!(0, _utils.isTouchEvent)(event) && event.target.tagName.toLowerCase() === 'a') {\n            event.preventDefault();\n          }\n\n          if (!distance) {\n            if (_this.props.pressDelay === 0) {\n              _this.handlePress(event);\n            } else {\n              _this.pressTimer = setTimeout(function () {\n                return _this.handlePress(event);\n              }, _this.props.pressDelay);\n            }\n          }\n        }\n      };\n\n      _this.nodeIsChild = function (node) {\n        return node.sortableInfo.manager === _this.manager;\n      };\n\n      _this.handleMove = function (event) {\n        var _this$props2 = _this.props,\n            distance = _this$props2.distance,\n            pressThreshold = _this$props2.pressThreshold;\n\n\n        if (!_this.state.sorting && _this._touched) {\n          var position = (0, _utils.getPosition)(event);\n          var delta = _this._delta = {\n            x: _this._pos.x - position.x,\n            y: _this._pos.y - position.y\n          };\n          var combinedDelta = Math.abs(delta.x) + Math.abs(delta.y);\n\n          if (!distance && (!pressThreshold || pressThreshold && combinedDelta >= pressThreshold)) {\n            clearTimeout(_this.cancelTimer);\n            _this.cancelTimer = setTimeout(_this.cancel, 0);\n          } else if (distance && combinedDelta >= distance && _this.manager.isActive()) {\n            _this.handlePress(event);\n          }\n        }\n      };\n\n      _this.handleEnd = function () {\n        _this._touched = false;\n        _this.cancel();\n      };\n\n      _this.cancel = function () {\n        var distance = _this.props.distance;\n        var sorting = _this.state.sorting;\n\n\n        if (!sorting) {\n          if (!distance) {\n            clearTimeout(_this.pressTimer);\n          }\n          _this.manager.active = null;\n        }\n      };\n\n      _this.handlePress = function (event) {\n        var active = _this.manager.getActive();\n\n        if (active) {\n          var _this$props3 = _this.props,\n              axis = _this$props3.axis,\n              getHelperDimensions = _this$props3.getHelperDimensions,\n              helperClass = _this$props3.helperClass,\n              hideSortableGhost = _this$props3.hideSortableGhost,\n              onSortStart = _this$props3.onSortStart,\n              useWindowAsScrollContainer = _this$props3.useWindowAsScrollContainer;\n          var node = active.node,\n              collection = active.collection;\n          var index = node.sortableInfo.index;\n\n          var margin = (0, _utils.getElementMargin)(node);\n\n          var containerBoundingRect = _this.container.getBoundingClientRect();\n          var dimensions = getHelperDimensions({ index: index, node: node, collection: collection });\n\n          _this.node = node;\n          _this.margin = margin;\n          _this.width = dimensions.width;\n          _this.height = dimensions.height;\n          _this.marginOffset = {\n            x: _this.margin.left + _this.margin.right,\n            y: Math.max(_this.margin.top, _this.margin.bottom)\n          };\n          _this.boundingClientRect = node.getBoundingClientRect();\n          _this.containerBoundingRect = containerBoundingRect;\n          _this.index = index;\n          _this.newIndex = index;\n\n          _this.axis = {\n            x: axis.indexOf('x') >= 0,\n            y: axis.indexOf('y') >= 0\n          };\n          _this.offsetEdge = (0, _utils.getEdgeOffset)(node, _this.container);\n          _this.initialOffset = (0, _utils.getPosition)(event);\n          _this.initialScroll = {\n            top: _this.container.scrollTop,\n            left: _this.container.scrollLeft\n          };\n\n          _this.initialWindowScroll = {\n            top: window.pageYOffset,\n            left: window.pageXOffset\n          };\n\n          var fields = node.querySelectorAll('input, textarea, select');\n          var clonedNode = node.cloneNode(true);\n          var clonedFields = [].concat(_toConsumableArray(clonedNode.querySelectorAll('input, textarea, select'))); // Convert NodeList to Array\n\n          clonedFields.forEach(function (field, index) {\n            if (field.type !== 'file' && fields[index]) {\n              field.value = fields[index].value;\n            }\n          });\n\n          _this.helper = _this.document.body.appendChild(clonedNode);\n\n          _this.helper.style.position = 'fixed';\n          _this.helper.style.top = _this.boundingClientRect.top - margin.top + 'px';\n          _this.helper.style.left = _this.boundingClientRect.left - margin.left + 'px';\n          _this.helper.style.width = _this.width + 'px';\n          _this.helper.style.height = _this.height + 'px';\n          _this.helper.style.boxSizing = 'border-box';\n          _this.helper.style.pointerEvents = 'none';\n\n          if (hideSortableGhost) {\n            _this.sortableGhost = node;\n            node.style.visibility = 'hidden';\n            node.style.opacity = 0;\n          }\n\n          _this.minTranslate = {};\n          _this.maxTranslate = {};\n          if (_this.axis.x) {\n            _this.minTranslate.x = (useWindowAsScrollContainer ? 0 : containerBoundingRect.left) - _this.boundingClientRect.left - _this.width / 2;\n            _this.maxTranslate.x = (useWindowAsScrollContainer ? _this.contentWindow.innerWidth : containerBoundingRect.left + containerBoundingRect.width) - _this.boundingClientRect.left - _this.width / 2;\n          }\n          if (_this.axis.y) {\n            _this.minTranslate.y = (useWindowAsScrollContainer ? 0 : containerBoundingRect.top) - _this.boundingClientRect.top - _this.height / 2;\n            _this.maxTranslate.y = (useWindowAsScrollContainer ? _this.contentWindow.innerHeight : containerBoundingRect.top + containerBoundingRect.height) - _this.boundingClientRect.top - _this.height / 2;\n          }\n\n          if (helperClass) {\n            var _this$helper$classLis;\n\n            (_this$helper$classLis = _this.helper.classList).add.apply(_this$helper$classLis, _toConsumableArray(helperClass.split(' ')));\n          }\n\n          _this.listenerNode = event.touches ? node : _this.contentWindow;\n          _utils.events.move.forEach(function (eventName) {\n            return _this.listenerNode.addEventListener(eventName, _this.handleSortMove, false);\n          });\n          _utils.events.end.forEach(function (eventName) {\n            return _this.listenerNode.addEventListener(eventName, _this.handleSortEnd, false);\n          });\n\n          _this.setState({\n            sorting: true,\n            sortingIndex: index\n          });\n\n          if (onSortStart) {\n            onSortStart({ node: node, index: index, collection: collection }, event);\n          }\n        }\n      };\n\n      _this.handleSortMove = function (event) {\n        var onSortMove = _this.props.onSortMove;\n\n        event.preventDefault(); // Prevent scrolling on mobile\n\n        _this.updatePosition(event);\n        _this.animateNodes();\n        _this.autoscroll();\n\n        if (onSortMove) {\n          onSortMove(event);\n        }\n      };\n\n      _this.handleSortEnd = function (event) {\n        var _this$props4 = _this.props,\n            hideSortableGhost = _this$props4.hideSortableGhost,\n            onSortEnd = _this$props4.onSortEnd;\n        var collection = _this.manager.active.collection;\n\n        // Remove the event listeners if the node is still in the DOM\n\n        if (_this.listenerNode) {\n          _utils.events.move.forEach(function (eventName) {\n            return _this.listenerNode.removeEventListener(eventName, _this.handleSortMove);\n          });\n          _utils.events.end.forEach(function (eventName) {\n            return _this.listenerNode.removeEventListener(eventName, _this.handleSortEnd);\n          });\n        }\n\n        // Remove the helper from the DOM\n        _this.helper.parentNode.removeChild(_this.helper);\n\n        if (hideSortableGhost && _this.sortableGhost) {\n          _this.sortableGhost.style.visibility = '';\n          _this.sortableGhost.style.opacity = '';\n        }\n\n        var nodes = _this.manager.refs[collection];\n        for (var i = 0, len = nodes.length; i < len; i++) {\n          var node = nodes[i];\n          var el = node.node;\n\n          // Clear the cached offsetTop / offsetLeft value\n          node.edgeOffset = null;\n\n          // Remove the transforms / transitions\n          el.style[_utils.vendorPrefix + 'Transform'] = '';\n          el.style[_utils.vendorPrefix + 'TransitionDuration'] = '';\n        }\n\n        // Stop autoscroll\n        clearInterval(_this.autoscrollInterval);\n        _this.autoscrollInterval = null;\n\n        // Update state\n        _this.manager.active = null;\n\n        _this.setState({\n          sorting: false,\n          sortingIndex: null\n        });\n\n        if (typeof onSortEnd === 'function') {\n          onSortEnd({\n            oldIndex: _this.index,\n            newIndex: _this.newIndex,\n            collection: collection\n          }, event);\n        }\n\n        _this._touched = false;\n      };\n\n      _this.autoscroll = function () {\n        var translate = _this.translate;\n        var direction = {\n          x: 0,\n          y: 0\n        };\n        var speed = {\n          x: 1,\n          y: 1\n        };\n        var acceleration = {\n          x: 10,\n          y: 10\n        };\n\n        if (translate.y >= _this.maxTranslate.y - _this.height / 2) {\n          direction.y = 1; // Scroll Down\n          speed.y = acceleration.y * Math.abs((_this.maxTranslate.y - _this.height / 2 - translate.y) / _this.height);\n        } else if (translate.x >= _this.maxTranslate.x - _this.width / 2) {\n          direction.x = 1; // Scroll Right\n          speed.x = acceleration.x * Math.abs((_this.maxTranslate.x - _this.width / 2 - translate.x) / _this.width);\n        } else if (translate.y <= _this.minTranslate.y + _this.height / 2) {\n          direction.y = -1; // Scroll Up\n          speed.y = acceleration.y * Math.abs((translate.y - _this.height / 2 - _this.minTranslate.y) / _this.height);\n        } else if (translate.x <= _this.minTranslate.x + _this.width / 2) {\n          direction.x = -1; // Scroll Left\n          speed.x = acceleration.x * Math.abs((translate.x - _this.width / 2 - _this.minTranslate.x) / _this.width);\n        }\n\n        if (_this.autoscrollInterval) {\n          clearInterval(_this.autoscrollInterval);\n          _this.autoscrollInterval = null;\n          _this.isAutoScrolling = false;\n        }\n\n        if (direction.x !== 0 || direction.y !== 0) {\n          _this.autoscrollInterval = setInterval(function () {\n            _this.isAutoScrolling = true;\n            var offset = {\n              left: 1 * speed.x * direction.x,\n              top: 1 * speed.y * direction.y\n            };\n            _this.scrollContainer.scrollTop += offset.top;\n            _this.scrollContainer.scrollLeft += offset.left;\n            _this.translate.x += offset.left;\n            _this.translate.y += offset.top;\n            _this.animateNodes();\n          }, 5);\n        }\n      };\n\n      _this.manager = new _Manager2.default();\n      _this.events = {\n        start: _this.handleStart,\n        move: _this.handleMove,\n        end: _this.handleEnd\n      };\n\n      (0, _invariant2.default)(!(props.distance && props.pressDelay), 'Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.');\n\n      _this.state = {};\n      return _this;\n    }\n\n    _createClass(_class, [{\n      key: 'getChildContext',\n      value: function getChildContext() {\n        return {\n          manager: this.manager\n        };\n      }\n    }, {\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        var useWindowAsScrollContainer = this.props.useWindowAsScrollContainer;\n\n        /*\n         *  Set our own default rather than using defaultProps because Jest\n         *  snapshots will serialize window, causing a RangeError\n         *  https://github.com/clauderic/react-sortable-hoc/issues/249\n         */\n\n        var container = this.getContainer();\n\n        Promise.resolve(container).then(function (containerNode) {\n          _this2.container = containerNode;\n          _this2.document = _this2.container.ownerDocument || document;\n\n          var contentWindow = _this2.props.contentWindow || _this2.document.defaultView || window;\n\n          _this2.contentWindow = typeof contentWindow === 'function' ? contentWindow() : contentWindow;\n          _this2.scrollContainer = useWindowAsScrollContainer ? _this2.document.scrollingElement || _this2.document.documentElement : _this2.container;\n\n          var _loop = function _loop(key) {\n            if (_this2.events.hasOwnProperty(key)) {\n              _utils.events[key].forEach(function (eventName) {\n                return _this2.container.addEventListener(eventName, _this2.events[key], false);\n              });\n            }\n          };\n\n          for (var key in _this2.events) {\n            _loop(key);\n          }\n        });\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        var _this3 = this;\n\n        if (this.container) {\n          var _loop2 = function _loop2(key) {\n            if (_this3.events.hasOwnProperty(key)) {\n              _utils.events[key].forEach(function (eventName) {\n                return _this3.container.removeEventListener(eventName, _this3.events[key]);\n              });\n            }\n          };\n\n          for (var key in this.events) {\n            _loop2(key);\n          }\n        }\n      }\n    }, {\n      key: 'getLockPixelOffsets',\n      value: function getLockPixelOffsets() {\n        var width = this.width,\n            height = this.height;\n        var lockOffset = this.props.lockOffset;\n\n        var offsets = Array.isArray(lockOffset) ? lockOffset : [lockOffset, lockOffset];\n\n        (0, _invariant2.default)(offsets.length === 2, 'lockOffset prop of SortableContainer should be a single ' + 'value or an array of exactly two values. Given %s', lockOffset);\n\n        var _offsets = _slicedToArray(offsets, 2),\n            minLockOffset = _offsets[0],\n            maxLockOffset = _offsets[1];\n\n        return [(0, _utils.getLockPixelOffset)({ lockOffset: minLockOffset, width: width, height: height }), (0, _utils.getLockPixelOffset)({ lockOffset: maxLockOffset, width: width, height: height })];\n      }\n    }, {\n      key: 'updatePosition',\n      value: function updatePosition(event) {\n        var _props = this.props,\n            lockAxis = _props.lockAxis,\n            lockToContainerEdges = _props.lockToContainerEdges;\n\n\n        var offset = (0, _utils.getPosition)(event);\n        var translate = {\n          x: offset.x - this.initialOffset.x,\n          y: offset.y - this.initialOffset.y\n        };\n\n        // Adjust for window scroll\n        translate.y -= window.pageYOffset - this.initialWindowScroll.top;\n        translate.x -= window.pageXOffset - this.initialWindowScroll.left;\n\n        this.translate = translate;\n\n        if (lockToContainerEdges) {\n          var _getLockPixelOffsets = this.getLockPixelOffsets(),\n              _getLockPixelOffsets2 = _slicedToArray(_getLockPixelOffsets, 2),\n              minLockOffset = _getLockPixelOffsets2[0],\n              maxLockOffset = _getLockPixelOffsets2[1];\n\n          var minOffset = {\n            x: this.width / 2 - minLockOffset.x,\n            y: this.height / 2 - minLockOffset.y\n          };\n          var maxOffset = {\n            x: this.width / 2 - maxLockOffset.x,\n            y: this.height / 2 - maxLockOffset.y\n          };\n\n          translate.x = (0, _utils.limit)(this.minTranslate.x + minOffset.x, this.maxTranslate.x - maxOffset.x, translate.x);\n          translate.y = (0, _utils.limit)(this.minTranslate.y + minOffset.y, this.maxTranslate.y - maxOffset.y, translate.y);\n        }\n\n        if (lockAxis === 'x') {\n          translate.y = 0;\n        } else if (lockAxis === 'y') {\n          translate.x = 0;\n        }\n\n        this.helper.style[_utils.vendorPrefix + 'Transform'] = 'translate3d(' + translate.x + 'px,' + translate.y + 'px, 0)';\n      }\n    }, {\n      key: 'animateNodes',\n      value: function animateNodes() {\n        var _props2 = this.props,\n            transitionDuration = _props2.transitionDuration,\n            hideSortableGhost = _props2.hideSortableGhost,\n            onSortOver = _props2.onSortOver;\n\n        var nodes = this.manager.getOrderedRefs();\n        var containerScrollDelta = {\n          left: this.container.scrollLeft - this.initialScroll.left,\n          top: this.container.scrollTop - this.initialScroll.top\n        };\n        var sortingOffset = {\n          left: this.offsetEdge.left + this.translate.x + containerScrollDelta.left,\n          top: this.offsetEdge.top + this.translate.y + containerScrollDelta.top\n        };\n        var windowScrollDelta = {\n          top: window.pageYOffset - this.initialWindowScroll.top,\n          left: window.pageXOffset - this.initialWindowScroll.left\n        };\n        var prevIndex = this.newIndex;\n        this.newIndex = null;\n\n        for (var i = 0, len = nodes.length; i < len; i++) {\n          var node = nodes[i].node;\n\n          var index = node.sortableInfo.index;\n          var width = node.offsetWidth;\n          var height = node.offsetHeight;\n          var offset = {\n            width: this.width > width ? width / 2 : this.width / 2,\n            height: this.height > height ? height / 2 : this.height / 2\n          };\n\n          var translate = {\n            x: 0,\n            y: 0\n          };\n          var edgeOffset = nodes[i].edgeOffset;\n\n          // If we haven't cached the node's offsetTop / offsetLeft value\n\n          if (!edgeOffset) {\n            nodes[i].edgeOffset = edgeOffset = (0, _utils.getEdgeOffset)(node, this.container);\n          }\n\n          // Get a reference to the next and previous node\n          var nextNode = i < nodes.length - 1 && nodes[i + 1];\n          var prevNode = i > 0 && nodes[i - 1];\n\n          // Also cache the next node's edge offset if needed.\n          // We need this for calculating the animation in a grid setup\n          if (nextNode && !nextNode.edgeOffset) {\n            nextNode.edgeOffset = (0, _utils.getEdgeOffset)(nextNode.node, this.container);\n          }\n\n          // If the node is the one we're currently animating, skip it\n          if (index === this.index) {\n            if (hideSortableGhost) {\n              /*\n              * With windowing libraries such as `react-virtualized`, the sortableGhost\n              * node may change while scrolling down and then back up (or vice-versa),\n              * so we need to update the reference to the new node just to be safe.\n              */\n              this.sortableGhost = node;\n              node.style.visibility = 'hidden';\n              node.style.opacity = 0;\n            }\n            continue;\n          }\n\n          if (transitionDuration) {\n            node.style[_utils.vendorPrefix + 'TransitionDuration'] = transitionDuration + 'ms';\n          }\n\n          if (this.axis.x) {\n            if (this.axis.y) {\n              // Calculations for a grid setup\n              if (index < this.index && (sortingOffset.left + windowScrollDelta.left - offset.width <= edgeOffset.left && sortingOffset.top + windowScrollDelta.top <= edgeOffset.top + offset.height || sortingOffset.top + windowScrollDelta.top + offset.height <= edgeOffset.top)) {\n                // If the current node is to the left on the same row, or above the node that's being dragged\n                // then move it to the right\n                translate.x = this.width + this.marginOffset.x;\n                if (edgeOffset.left + translate.x > this.containerBoundingRect.width - offset.width) {\n                  // If it moves passed the right bounds, then animate it to the first position of the next row.\n                  // We just use the offset of the next node to calculate where to move, because that node's original position\n                  // is exactly where we want to go\n                  translate.x = nextNode.edgeOffset.left - edgeOffset.left;\n                  translate.y = nextNode.edgeOffset.top - edgeOffset.top;\n                }\n                if (this.newIndex === null) {\n                  this.newIndex = index;\n                }\n              } else if (index > this.index && (sortingOffset.left + windowScrollDelta.left + offset.width >= edgeOffset.left && sortingOffset.top + windowScrollDelta.top + offset.height >= edgeOffset.top || sortingOffset.top + windowScrollDelta.top + offset.height >= edgeOffset.top + height)) {\n                // If the current node is to the right on the same row, or below the node that's being dragged\n                // then move it to the left\n                translate.x = -(this.width + this.marginOffset.x);\n                if (edgeOffset.left + translate.x < this.containerBoundingRect.left + offset.width) {\n                  // If it moves passed the left bounds, then animate it to the last position of the previous row.\n                  // We just use the offset of the previous node to calculate where to move, because that node's original position\n                  // is exactly where we want to go\n                  translate.x = prevNode.edgeOffset.left - edgeOffset.left;\n                  translate.y = prevNode.edgeOffset.top - edgeOffset.top;\n                }\n                this.newIndex = index;\n              }\n            } else {\n              if (index > this.index && sortingOffset.left + windowScrollDelta.left + offset.width >= edgeOffset.left) {\n                translate.x = -(this.width + this.marginOffset.x);\n                this.newIndex = index;\n              } else if (index < this.index && sortingOffset.left + windowScrollDelta.left <= edgeOffset.left + offset.width) {\n                translate.x = this.width + this.marginOffset.x;\n                if (this.newIndex == null) {\n                  this.newIndex = index;\n                }\n              }\n            }\n          } else if (this.axis.y) {\n            if (index > this.index && sortingOffset.top + windowScrollDelta.top + offset.height >= edgeOffset.top) {\n              translate.y = -(this.height + this.marginOffset.y);\n              this.newIndex = index;\n            } else if (index < this.index && sortingOffset.top + windowScrollDelta.top <= edgeOffset.top + offset.height) {\n              translate.y = this.height + this.marginOffset.y;\n              if (this.newIndex == null) {\n                this.newIndex = index;\n              }\n            }\n          }\n          node.style[_utils.vendorPrefix + 'Transform'] = 'translate3d(' + translate.x + 'px,' + translate.y + 'px,0)';\n        }\n\n        if (this.newIndex == null) {\n          this.newIndex = this.index;\n        }\n\n        if (onSortOver && this.newIndex !== prevIndex) {\n          onSortOver({\n            newIndex: this.newIndex,\n            oldIndex: prevIndex,\n            index: this.index,\n            collection: this.manager.active.collection\n          });\n        }\n      }\n    }, {\n      key: 'getWrappedInstance',\n      value: function getWrappedInstance() {\n        (0, _invariant2.default)(config.withRef, 'To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call');\n\n        return this.refs.wrappedInstance;\n      }\n    }, {\n      key: 'getContainer',\n      value: function getContainer() {\n        var getContainer = this.props.getContainer;\n\n\n        if (typeof getContainer !== 'function') {\n          return (0, _reactDom.findDOMNode)(this);\n        }\n\n        return getContainer(config.withRef ? this.getWrappedInstance() : undefined);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var ref = config.withRef ? 'wrappedInstance' : null;\n\n        return _react2.default.createElement(WrappedComponent, _extends({\n          ref: ref\n        }, (0, _utils.omit)(this.props, 'contentWindow', 'useWindowAsScrollContainer', 'distance', 'helperClass', 'hideSortableGhost', 'transitionDuration', 'useDragHandle', 'pressDelay', 'pressThreshold', 'shouldCancelStart', 'onSortStart', 'onSortMove', 'onSortEnd', 'axis', 'lockAxis', 'lockOffset', 'lockToContainerEdges', 'getContainer', 'getHelperDimensions')));\n      }\n    }]);\n\n    return _class;\n  }(_react.Component), _class.displayName = (0, _utils.provideDisplayName)('sortableList', WrappedComponent), _class.defaultProps = {\n    axis: 'y',\n    transitionDuration: 300,\n    pressDelay: 0,\n    pressThreshold: 5,\n    distance: 0,\n    useWindowAsScrollContainer: false,\n    hideSortableGhost: true,\n    shouldCancelStart: function shouldCancelStart(e) {\n      // Cancel sorting if the event target is an `input`, `textarea`, `select` or `option`\n      var disabledElements = ['input', 'textarea', 'select', 'option', 'button'];\n\n      if (disabledElements.indexOf(e.target.tagName.toLowerCase()) !== -1) {\n        return true; // Return true to cancel sorting\n      }\n    },\n    lockToContainerEdges: false,\n    lockOffset: '50%',\n    getHelperDimensions: function getHelperDimensions(_ref) {\n      var node = _ref.node;\n      return {\n        width: node.offsetWidth,\n        height: node.offsetHeight\n      };\n    }\n  }, _class.propTypes = {\n    axis: _propTypes2.default.oneOf(['x', 'y', 'xy']),\n    distance: _propTypes2.default.number,\n    lockAxis: _propTypes2.default.string,\n    helperClass: _propTypes2.default.string,\n    transitionDuration: _propTypes2.default.number,\n    contentWindow: _propTypes2.default.any,\n    onSortStart: _propTypes2.default.func,\n    onSortMove: _propTypes2.default.func,\n    onSortOver: _propTypes2.default.func,\n    onSortEnd: _propTypes2.default.func,\n    shouldCancelStart: _propTypes2.default.func,\n    pressDelay: _propTypes2.default.number,\n    useDragHandle: _propTypes2.default.bool,\n    useWindowAsScrollContainer: _propTypes2.default.bool,\n    hideSortableGhost: _propTypes2.default.bool,\n    lockToContainerEdges: _propTypes2.default.bool,\n    lockOffset: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string, _propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]))]),\n    getContainer: _propTypes2.default.func,\n    getHelperDimensions: _propTypes2.default.func\n  }, _class.childContextTypes = {\n    manager: _propTypes2.default.object.isRequired\n  }, _temp;\n}"]},"metadata":{},"sourceType":"script"}