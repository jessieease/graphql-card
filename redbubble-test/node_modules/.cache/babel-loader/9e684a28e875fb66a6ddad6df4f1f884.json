{"ast":null,"code":"\"use strict\";\n/**\n *  Copyright (c) Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __makeTemplateObject = void 0 && (void 0).__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar ExecuteButtonOperation_1 = require(\"./ExecuteButtonOperation\");\n\nvar styled_1 = require(\"../../styled\");\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar actions_1 = require(\"../../state/sessions/actions\");\n\nvar reselect_1 = require(\"reselect\");\n\nvar selectors_1 = require(\"../../state/sessions/selectors\");\n\nvar toJS_1 = require(\"./util/toJS\");\n\nvar firstTime = true;\n/**\n * ExecuteButton\n *\n * What a nice round shiny button. Shows a drop-down when there are multiple\n * queries to run.\n */\n\nvar ExecuteButton =\n/** @class */\nfunction (_super) {\n  __extends(ExecuteButton, _super);\n\n  function ExecuteButton(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.handleMouseOver = function (operation) {\n      _this.setState({\n        highlight: operation\n      });\n    };\n\n    _this.handleMouseOut = function () {\n      _this.setState({\n        highlight: null\n      });\n    };\n\n    _this.handleMouseUp = function (operation) {\n      _this.onOptionSelected(operation);\n    };\n\n    _this.onClick = function () {\n      if (_this.props.queryRunning) {\n        _this.props.stopQuery(_this.props.sessionId);\n      } else {\n        _this.props.runQuery();\n      }\n    };\n\n    _this.onOptionSelected = function (operation) {\n      _this.setState({\n        optionsOpen: false\n      });\n\n      if (!operation) {\n        return;\n      }\n\n      _this.props.runQuery(operation.name && operation.name.value);\n    };\n\n    _this.onOptionsOpen = function (downEvent) {\n      var initialPress = true;\n      var downTarget = downEvent.target;\n\n      _this.setState({\n        highlight: null,\n        optionsOpen: true\n      });\n\n      var _onMouseUp = function onMouseUp(upEvent) {\n        if (initialPress && upEvent.target === downTarget) {\n          initialPress = false;\n        } else {\n          document.removeEventListener('mouseup', _onMouseUp);\n          _onMouseUp = null;\n\n          if (downTarget.parentNode) {\n            var isOptionsMenuClicked = // tslint:disable-next-line\n            downTarget.parentNode.compareDocumentPosition(upEvent.target) & Node.DOCUMENT_POSITION_CONTAINED_BY;\n\n            if (!isOptionsMenuClicked) {\n              // menu calls setState if it was clicked\n              _this.setState({\n                optionsOpen: false\n              });\n            }\n\n            if (firstTime) {\n              _this.onOptionSelected(_this.props.operations.find(function (op) {\n                return op.name.value === upEvent.target.textContent;\n              }) || _this.props.operations[0]);\n\n              firstTime = false;\n            }\n          }\n        }\n      };\n\n      document.addEventListener('mouseup', _onMouseUp);\n    };\n\n    _this.state = {\n      optionsOpen: false,\n      highlight: null\n    };\n    return _this;\n  }\n\n  ExecuteButton.prototype.render = function () {\n    var _this = this;\n\n    var operations = this.props.operations;\n    var optionsOpen = this.state.optionsOpen;\n    var hasOptions = operations && operations.length > 1;\n    var options = null;\n\n    if (hasOptions && optionsOpen) {\n      var highlight_1 = this.state.highlight;\n      options = /*#__PURE__*/React.createElement(ExecuteBox, null, /*#__PURE__*/React.createElement(ExecuteOptions, null, operations.map(function (operation) {\n        return /*#__PURE__*/React.createElement(ExecuteButtonOperation_1[\"default\"], {\n          operation: operation,\n          onMouseOver: _this.handleMouseOver,\n          onMouseOut: _this.handleMouseOut,\n          onMouseUp: _this.handleMouseUp,\n          highlight: highlight_1,\n          key: operation.name ? operation.name.value : '*'\n        });\n      })));\n    } // Allow click event if there is a running query or if there are not options\n    // for which operation to run.\n\n\n    var onClick;\n\n    if (this.props.queryRunning || !hasOptions) {\n      onClick = this.onClick;\n    } // Allow mouse down if there is no running query, there are options for\n    // which operation to run, and the dropdown is currently closed.\n\n\n    var onMouseDown;\n\n    if (!this.props.queryRunning && hasOptions && !optionsOpen) {\n      onMouseDown = this.onOptionsOpen;\n    }\n\n    var pathJSX = this.props.queryRunning ? /*#__PURE__*/React.createElement(\"rect\", {\n      fill: \"#FFFFFF\",\n      x: \"10\",\n      y: \"10\",\n      width: \"13\",\n      height: \"13\",\n      rx: \"1\"\n    }) : /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M 11 9 L 24 16 L 11 23 z\"\n    });\n    return /*#__PURE__*/React.createElement(Wrapper, null, /*#__PURE__*/React.createElement(Button, {\n      isRunning: this.props.queryRunning,\n      onMouseDown: onMouseDown,\n      onClick: onClick,\n      title: \"Execute Query (Ctrl-Enter)\"\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      width: \"35\",\n      height: \"35\",\n      viewBox: (this.props.queryRunning ? 4 : 3) + \".5,4.5,24,24\"\n    }, pathJSX)), options);\n  };\n\n  return ExecuteButton;\n}(React.Component);\n\nvar mapStateToProps = reselect_1.createStructuredSelector({\n  queryRunning: selectors_1.getQueryRunning,\n  operations: selectors_1.getOperations,\n  sessionId: selectors_1.getSelectedSessionIdFromRoot\n});\nexports[\"default\"] = react_redux_1.connect(mapStateToProps, {\n  runQuery: actions_1.runQuery,\n  stopQuery: actions_1.stopQuery\n})(toJS_1.toJS(ExecuteButton));\nvar Wrapper = styled_1.styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: absolute;\\n  left: -62px;\\n  z-index: 5;\\n  top: 15px;\\n  margin: 0 14px 0 28px;\\n\"], [\"\\n  position: absolute;\\n  left: -62px;\\n  z-index: 5;\\n  top: 15px;\\n  margin: 0 14px 0 28px;\\n\"])));\nvar Button = styled_1.styled('div')(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  width: 60px;\\n  height: 60px;\\n\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\\n  border-radius: 100%;\\n  transition: background-color 100ms;\\n  background-color: \", \";\\n  border: 6px solid \", \";\\n  cursor: pointer;\\n  user-select: none;\\n\\n  svg {\\n    fill: \", \";\\n  }\\n\\n  &:hover {\\n    background-color: \", \";\\n  }\\n\"], [\"\\n  width: 60px;\\n  height: 60px;\\n\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\\n  border-radius: 100%;\\n  transition: background-color 100ms;\\n  background-color: \", \";\\n  border: 6px solid \", \";\\n  cursor: pointer;\\n  user-select: none;\\n\\n  svg {\\n    fill: \", \";\\n  }\\n\\n  &:hover {\\n    background-color: \", \";\\n  }\\n\"])), function (p) {\n  return p.isRunning ? p.theme.editorColours.executeButtonSubscription : p.theme.editorColours.executeButton;\n}, function (p) {\n  return p.theme.editorColours.executeButtonBorder;\n}, function (p) {\n  return p.theme.mode === 'light' ? 'white' : 'inherit';\n}, function (p) {\n  return p.isRunning ? p.theme.editorColours.executeButtonSubscriptionHover : p.theme.editorColours.executeButtonHover;\n});\nvar ExecuteBox = styled_1.styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  background: #fff;\\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.25);\\n  padding: 8px 0;\\n  left: -1px;\\n  margin: 0;\\n  position: absolute;\\n  top: 78px;\\n  z-index: 100;\\n  user-select: none;\\n\\n  &:before {\\n    position: absolute;\\n    background: white;\\n    content: '';\\n    top: -4px;\\n    left: 34px;\\n    transform: rotate(45deg);\\n    width: 8px;\\n    height: 8px;\\n  }\\n\"], [\"\\n  background: #fff;\\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.25);\\n  padding: 8px 0;\\n  left: -1px;\\n  margin: 0;\\n  position: absolute;\\n  top: 78px;\\n  z-index: 100;\\n  user-select: none;\\n\\n  &:before {\\n    position: absolute;\\n    background: white;\\n    content: '';\\n    top: -4px;\\n    left: 34px;\\n    transform: rotate(45deg);\\n    width: 8px;\\n    height: 8px;\\n  }\\n\"])));\nvar ExecuteOptions = styled_1.styled.ul(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  max-height: 270px;\\n  overflow: scroll;\\n\\n  li {\\n    cursor: pointer;\\n    list-style: none;\\n    min-width: 100px;\\n    padding: 2px 30px 4px 10px;\\n  }\\n\\n  li.selected {\\n    background: rgb(39, 174, 96);\\n    color: white;\\n  }\\n\"], [\"\\n  max-height: 270px;\\n  overflow: scroll;\\n\\n  li {\\n    cursor: pointer;\\n    list-style: none;\\n    min-width: 100px;\\n    padding: 2px 30px 4px 10px;\\n  }\\n\\n  li.selected {\\n    background: rgb(39, 174, 96);\\n    color: white;\\n  }\\n\"])));\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4;","map":{"version":3,"sources":["/Users/wubo/Desktop/card-design/card-design/node_modules/graphql-playground-react/lib/components/Playground/ExecuteButton.js"],"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__makeTemplateObject","cooked","raw","defineProperty","value","exports","React","require","ExecuteButtonOperation_1","styled_1","react_redux_1","actions_1","reselect_1","selectors_1","toJS_1","firstTime","ExecuteButton","_super","props","_this","call","handleMouseOver","operation","setState","highlight","handleMouseOut","handleMouseUp","onOptionSelected","onClick","queryRunning","stopQuery","sessionId","runQuery","optionsOpen","name","onOptionsOpen","downEvent","initialPress","downTarget","target","_onMouseUp","onMouseUp","upEvent","document","removeEventListener","parentNode","isOptionsMenuClicked","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","operations","find","op","textContent","addEventListener","state","render","hasOptions","length","options","highlight_1","createElement","ExecuteBox","ExecuteOptions","map","onMouseOver","onMouseOut","key","onMouseDown","pathJSX","fill","x","y","width","height","rx","Wrapper","Button","isRunning","title","viewBox","Component","mapStateToProps","createStructuredSelector","getQueryRunning","getOperations","getSelectedSessionIdFromRoot","connect","toJS","styled","div","templateObject_1","templateObject_2","theme","editorColours","executeButtonSubscription","executeButton","executeButtonBorder","mode","executeButtonSubscriptionHover","executeButtonHover","templateObject_3","ul","templateObject_4"],"mappings":"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","sourcesContent":["\"use strict\";\n/**\n *  Copyright (c) Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the license found in the\n *  LICENSE file in the root directory of this source tree.\n */\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __makeTemplateObject = void 0 && (void 0).__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar ExecuteButtonOperation_1 = require(\"./ExecuteButtonOperation\");\n\nvar styled_1 = require(\"../../styled\");\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar actions_1 = require(\"../../state/sessions/actions\");\n\nvar reselect_1 = require(\"reselect\");\n\nvar selectors_1 = require(\"../../state/sessions/selectors\");\n\nvar toJS_1 = require(\"./util/toJS\");\n\nvar firstTime = true;\n/**\n * ExecuteButton\n *\n * What a nice round shiny button. Shows a drop-down when there are multiple\n * queries to run.\n */\n\nvar ExecuteButton =\n/** @class */\nfunction (_super) {\n  __extends(ExecuteButton, _super);\n\n  function ExecuteButton(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.handleMouseOver = function (operation) {\n      _this.setState({\n        highlight: operation\n      });\n    };\n\n    _this.handleMouseOut = function () {\n      _this.setState({\n        highlight: null\n      });\n    };\n\n    _this.handleMouseUp = function (operation) {\n      _this.onOptionSelected(operation);\n    };\n\n    _this.onClick = function () {\n      if (_this.props.queryRunning) {\n        _this.props.stopQuery(_this.props.sessionId);\n      } else {\n        _this.props.runQuery();\n      }\n    };\n\n    _this.onOptionSelected = function (operation) {\n      _this.setState({\n        optionsOpen: false\n      });\n\n      if (!operation) {\n        return;\n      }\n\n      _this.props.runQuery(operation.name && operation.name.value);\n    };\n\n    _this.onOptionsOpen = function (downEvent) {\n      var initialPress = true;\n      var downTarget = downEvent.target;\n\n      _this.setState({\n        highlight: null,\n        optionsOpen: true\n      });\n\n      var _onMouseUp = function onMouseUp(upEvent) {\n        if (initialPress && upEvent.target === downTarget) {\n          initialPress = false;\n        } else {\n          document.removeEventListener('mouseup', _onMouseUp);\n          _onMouseUp = null;\n\n          if (downTarget.parentNode) {\n            var isOptionsMenuClicked = // tslint:disable-next-line\n            downTarget.parentNode.compareDocumentPosition(upEvent.target) & Node.DOCUMENT_POSITION_CONTAINED_BY;\n\n            if (!isOptionsMenuClicked) {\n              // menu calls setState if it was clicked\n              _this.setState({\n                optionsOpen: false\n              });\n            }\n\n            if (firstTime) {\n              _this.onOptionSelected(_this.props.operations.find(function (op) {\n                return op.name.value === upEvent.target.textContent;\n              }) || _this.props.operations[0]);\n\n              firstTime = false;\n            }\n          }\n        }\n      };\n\n      document.addEventListener('mouseup', _onMouseUp);\n    };\n\n    _this.state = {\n      optionsOpen: false,\n      highlight: null\n    };\n    return _this;\n  }\n\n  ExecuteButton.prototype.render = function () {\n    var _this = this;\n\n    var operations = this.props.operations;\n    var optionsOpen = this.state.optionsOpen;\n    var hasOptions = operations && operations.length > 1;\n    var options = null;\n\n    if (hasOptions && optionsOpen) {\n      var highlight_1 = this.state.highlight;\n      options = /*#__PURE__*/React.createElement(ExecuteBox, null, /*#__PURE__*/React.createElement(ExecuteOptions, null, operations.map(function (operation) {\n        return /*#__PURE__*/React.createElement(ExecuteButtonOperation_1[\"default\"], {\n          operation: operation,\n          onMouseOver: _this.handleMouseOver,\n          onMouseOut: _this.handleMouseOut,\n          onMouseUp: _this.handleMouseUp,\n          highlight: highlight_1,\n          key: operation.name ? operation.name.value : '*'\n        });\n      })));\n    } // Allow click event if there is a running query or if there are not options\n    // for which operation to run.\n\n\n    var onClick;\n\n    if (this.props.queryRunning || !hasOptions) {\n      onClick = this.onClick;\n    } // Allow mouse down if there is no running query, there are options for\n    // which operation to run, and the dropdown is currently closed.\n\n\n    var onMouseDown;\n\n    if (!this.props.queryRunning && hasOptions && !optionsOpen) {\n      onMouseDown = this.onOptionsOpen;\n    }\n\n    var pathJSX = this.props.queryRunning ? /*#__PURE__*/React.createElement(\"rect\", {\n      fill: \"#FFFFFF\",\n      x: \"10\",\n      y: \"10\",\n      width: \"13\",\n      height: \"13\",\n      rx: \"1\"\n    }) : /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M 11 9 L 24 16 L 11 23 z\"\n    });\n    return /*#__PURE__*/React.createElement(Wrapper, null, /*#__PURE__*/React.createElement(Button, {\n      isRunning: this.props.queryRunning,\n      onMouseDown: onMouseDown,\n      onClick: onClick,\n      title: \"Execute Query (Ctrl-Enter)\"\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      width: \"35\",\n      height: \"35\",\n      viewBox: (this.props.queryRunning ? 4 : 3) + \".5,4.5,24,24\"\n    }, pathJSX)), options);\n  };\n\n  return ExecuteButton;\n}(React.Component);\n\nvar mapStateToProps = reselect_1.createStructuredSelector({\n  queryRunning: selectors_1.getQueryRunning,\n  operations: selectors_1.getOperations,\n  sessionId: selectors_1.getSelectedSessionIdFromRoot\n});\nexports[\"default\"] = react_redux_1.connect(mapStateToProps, {\n  runQuery: actions_1.runQuery,\n  stopQuery: actions_1.stopQuery\n})(toJS_1.toJS(ExecuteButton));\nvar Wrapper = styled_1.styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: absolute;\\n  left: -62px;\\n  z-index: 5;\\n  top: 15px;\\n  margin: 0 14px 0 28px;\\n\"], [\"\\n  position: absolute;\\n  left: -62px;\\n  z-index: 5;\\n  top: 15px;\\n  margin: 0 14px 0 28px;\\n\"])));\nvar Button = styled_1.styled('div')(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  width: 60px;\\n  height: 60px;\\n\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\\n  border-radius: 100%;\\n  transition: background-color 100ms;\\n  background-color: \", \";\\n  border: 6px solid \", \";\\n  cursor: pointer;\\n  user-select: none;\\n\\n  svg {\\n    fill: \", \";\\n  }\\n\\n  &:hover {\\n    background-color: \", \";\\n  }\\n\"], [\"\\n  width: 60px;\\n  height: 60px;\\n\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\\n  border-radius: 100%;\\n  transition: background-color 100ms;\\n  background-color: \", \";\\n  border: 6px solid \", \";\\n  cursor: pointer;\\n  user-select: none;\\n\\n  svg {\\n    fill: \", \";\\n  }\\n\\n  &:hover {\\n    background-color: \", \";\\n  }\\n\"])), function (p) {\n  return p.isRunning ? p.theme.editorColours.executeButtonSubscription : p.theme.editorColours.executeButton;\n}, function (p) {\n  return p.theme.editorColours.executeButtonBorder;\n}, function (p) {\n  return p.theme.mode === 'light' ? 'white' : 'inherit';\n}, function (p) {\n  return p.isRunning ? p.theme.editorColours.executeButtonSubscriptionHover : p.theme.editorColours.executeButtonHover;\n});\nvar ExecuteBox = styled_1.styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  background: #fff;\\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.25);\\n  padding: 8px 0;\\n  left: -1px;\\n  margin: 0;\\n  position: absolute;\\n  top: 78px;\\n  z-index: 100;\\n  user-select: none;\\n\\n  &:before {\\n    position: absolute;\\n    background: white;\\n    content: '';\\n    top: -4px;\\n    left: 34px;\\n    transform: rotate(45deg);\\n    width: 8px;\\n    height: 8px;\\n  }\\n\"], [\"\\n  background: #fff;\\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.25);\\n  padding: 8px 0;\\n  left: -1px;\\n  margin: 0;\\n  position: absolute;\\n  top: 78px;\\n  z-index: 100;\\n  user-select: none;\\n\\n  &:before {\\n    position: absolute;\\n    background: white;\\n    content: '';\\n    top: -4px;\\n    left: 34px;\\n    transform: rotate(45deg);\\n    width: 8px;\\n    height: 8px;\\n  }\\n\"])));\nvar ExecuteOptions = styled_1.styled.ul(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  max-height: 270px;\\n  overflow: scroll;\\n\\n  li {\\n    cursor: pointer;\\n    list-style: none;\\n    min-width: 100px;\\n    padding: 2px 30px 4px 10px;\\n  }\\n\\n  li.selected {\\n    background: rgb(39, 174, 96);\\n    color: white;\\n  }\\n\"], [\"\\n  max-height: 270px;\\n  overflow: scroll;\\n\\n  li {\\n    cursor: pointer;\\n    list-style: none;\\n    min-width: 100px;\\n    padding: 2px 30px 4px 10px;\\n  }\\n\\n  li.selected {\\n    background: rgb(39, 174, 96);\\n    color: white;\\n  }\\n\"])));\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4;"]},"metadata":{},"sourceType":"script"}