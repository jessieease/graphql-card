{"ast":null,"code":"\"use strict\";\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __makeTemplateObject = void 0 && (void 0).__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar redux_1 = require(\"redux\");\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar keycode = require(\"keycode\");\n\nvar FieldDoc_1 = require(\"./FieldDoc\");\n\nvar ColumnDoc_1 = require(\"./ColumnDoc\");\n\nvar actions_1 = require(\"../../../state/docs/actions\");\n\nvar Spinner_1 = require(\"../../Spinner\");\n\nvar constants_1 = require(\"../../../constants\");\n\nvar RootColumn_1 = require(\"./RootColumn\");\n\nvar stack_1 = require(\"../util/stack\");\n\nvar selectors_1 = require(\"../../../state/docs/selectors\");\n\nvar selectors_2 = require(\"../../../state/sessions/selectors\");\n\nvar reselect_1 = require(\"reselect\");\n\nvar ErrorContainer_1 = require(\"./ErrorContainer\");\n\nvar styled_1 = require(\"../../../styled\");\n\nvar GraphDocs =\n/** @class */\nfunction (_super) {\n  __extends(GraphDocs, _super); // private refDocExplorer: any;\n\n\n  function GraphDocs(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.setRef = function (ref) {\n      _this.ref = ref;\n    };\n\n    _this.showDocFromType = function (type) {\n      _this.props.addStack(_this.props.sessionId, type, 0, 0);\n    };\n\n    _this.handleSearch = function (value) {\n      _this.setState({\n        searchValue: value\n      });\n    };\n\n    _this.handleKeyDown = function (e) {\n      // we don't want to interfere with inputs\n      if (e.target instanceof HTMLInputElement || e.metaKey || e.shiftKey || e.altKey || e.ctrlKey) {\n        return;\n      }\n\n      e.preventDefault();\n\n      _this.props.changeKeyMove(_this.props.sessionId, true);\n\n      var lastNavStack = _this.props.docs.navStack.length > 0 && _this.props.docs.navStack[_this.props.docs.navStack.length - 1];\n      var beforeLastNavStack = _this.props.docs.navStack.length > 0 && _this.props.docs.navStack[_this.props.docs.navStack.length - 2];\n      var keyPressed = keycode(e);\n\n      switch (keyPressed) {\n        case 'esc':\n          _this.props.setDocsVisible(_this.props.sessionId, false);\n\n          break;\n\n        case 'left':\n          if (beforeLastNavStack) {\n            _this.props.addStack(_this.props.sessionId, beforeLastNavStack.field, beforeLastNavStack.x, beforeLastNavStack.y);\n          }\n\n          break;\n\n        case 'right':\n          if (lastNavStack) {\n            var obj = stack_1.serialize(_this.props.schema, lastNavStack.field);\n            var firstElement = stack_1.getElement(obj, 0);\n\n            if (firstElement) {\n              _this.props.addStack(_this.props.sessionId, firstElement, lastNavStack.x + 1, 0);\n            }\n          } else {\n            var obj = stack_1.serializeRoot(_this.props.schema);\n            var element = stack_1.getElementRoot(obj, 0);\n\n            if (element) {\n              _this.props.addStack(_this.props.sessionId, element, 0, 0);\n            }\n          }\n\n          break;\n\n        case 'up':\n        case 'down':\n          if (beforeLastNavStack) {\n            var obj = stack_1.serialize(_this.props.schema, beforeLastNavStack.field);\n            var element = stack_1.getElement(obj, keyPressed === 'up' ? lastNavStack.y - 1 : lastNavStack.y + 1);\n\n            if (element) {\n              _this.props.addStack(_this.props.sessionId, element, lastNavStack.x, keyPressed === 'up' ? lastNavStack.y - 1 : lastNavStack.y + 1);\n            }\n          } else {\n            var obj = stack_1.serializeRoot(_this.props.schema);\n            var y = lastNavStack ? lastNavStack.y : 0;\n            var element = stack_1.getElementRoot(obj, keyPressed === 'up' ? y - 1 : y + 1);\n\n            if (element) {\n              _this.props.addStack(_this.props.sessionId, element, 0, keyPressed === 'up' ? y - 1 : y + 1);\n            }\n          }\n\n          break;\n      }\n    };\n\n    _this.state = {\n      searchValue: '',\n      widthMap: {}\n    };\n    window.d = _this;\n    return _this;\n  }\n\n  GraphDocs.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\n    // If user use default column size % columnWidth\n    // Make the column follow the clicks\n    if (this.props.docs.navStack.length !== nextProps.docs.navStack.length || this.props.docs.navStack.slice(-1)[0] !== nextProps.docs.navStack.slice(-1)[0] || !this.props.schema && nextProps.schema) {\n      this.setWidth(nextProps);\n    }\n  };\n\n  GraphDocs.prototype.setWidth = function (props) {\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    this.props.setWidth(props);\n  };\n\n  GraphDocs.prototype.getWidth = function (props) {\n    var _this = this;\n\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var rootWidth = this.state.widthMap.root || constants_1.columnWidth;\n    var stackWidths = props.docs.navStack.map(function (stack) {\n      return _this.state.widthMap[stack.field.path] || constants_1.columnWidth;\n    });\n    return [rootWidth].concat(stackWidths).reduce(function (acc, curr) {\n      return acc + curr;\n    }, 0);\n  };\n\n  GraphDocs.prototype.componentDidMount = function () {\n    this.setWidth();\n  };\n\n  GraphDocs.prototype.render = function () {\n    var _this = this;\n\n    var navStack = this.props.docs.navStack;\n    var schema = this.props.schema;\n    var emptySchema;\n\n    if (schema === undefined) {\n      // Schema is undefined when it is being loaded via introspection.\n      emptySchema = /*#__PURE__*/React.createElement(Spinner_1[\"default\"], null);\n    } else if (schema === null) {\n      // Schema is null when it explicitly does not exist, typically due to\n      // an error during introspection.\n      emptySchema = /*#__PURE__*/React.createElement(ErrorContainer_1.ErrorContainer, null, 'No Schema Available');\n    }\n\n    return /*#__PURE__*/React.createElement(DocsExplorerContainer, {\n      onKeyDown: this.handleKeyDown,\n      tabIndex: 0,\n      ref: this.setRef\n    }, emptySchema && /*#__PURE__*/React.createElement(ColumnDoc_1[\"default\"], null, emptySchema), !emptySchema && schema && /*#__PURE__*/React.createElement(RootColumn_1[\"default\"], {\n      schema: schema,\n      width: this.state.widthMap.root || constants_1.columnWidth - 1,\n      searchValue: this.state.searchValue,\n      handleSearch: this.handleSearch,\n      sessionId: this.props.sessionId\n    }), navStack.map(function (stack, index) {\n      return /*#__PURE__*/React.createElement(ColumnDoc_1[\"default\"], {\n        key: index,\n        width: _this.state.widthMap[stack.field.path] || constants_1.columnWidth\n      }, /*#__PURE__*/React.createElement(FieldDoc_1[\"default\"], {\n        schema: schema,\n        field: stack.field,\n        level: index + 1,\n        sessionId: _this.props.sessionId\n      }));\n    }));\n  };\n\n  return GraphDocs;\n}(React.Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return redux_1.bindActionCreators({\n    addStack: actions_1.addStack,\n    toggleDocs: actions_1.toggleDocs,\n    changeWidthDocs: actions_1.changeWidthDocs,\n    changeKeyMove: actions_1.changeKeyMove,\n    setDocsVisible: actions_1.setDocsVisible\n  }, dispatch);\n};\n\nvar mapStateToProps = reselect_1.createStructuredSelector({\n  docs: selectors_1.getSessionDocs,\n  sessionId: selectors_2.getSelectedSessionIdFromRoot\n});\nexports[\"default\"] = react_redux_1.connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true\n})(GraphDocs);\nvar DocsExplorerContainer = styled_1.styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  display: flex;\\n  position: relative;\\n  height: 100%;\\n  width: 100%;\\n  overflow-x: auto;\\n  overflow-y: hidden;\\n  outline: none !important;\\n\"], [\"\\n  display: flex;\\n  position: relative;\\n  height: 100%;\\n  width: 100%;\\n  overflow-x: auto;\\n  overflow-y: hidden;\\n  outline: none !important;\\n\"])));\nvar templateObject_1;","map":{"version":3,"sources":["/Users/wubo/Desktop/card-design/card-design/node_modules/graphql-playground-react/lib/components/Playground/DocExplorer/GraphDocs.js"],"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__makeTemplateObject","cooked","raw","defineProperty","value","exports","React","require","redux_1","react_redux_1","keycode","FieldDoc_1","ColumnDoc_1","actions_1","Spinner_1","constants_1","RootColumn_1","stack_1","selectors_1","selectors_2","reselect_1","ErrorContainer_1","styled_1","GraphDocs","_super","props","_this","call","setRef","ref","showDocFromType","type","addStack","sessionId","handleSearch","setState","searchValue","handleKeyDown","e","target","HTMLInputElement","metaKey","shiftKey","altKey","ctrlKey","preventDefault","changeKeyMove","lastNavStack","docs","navStack","length","beforeLastNavStack","keyPressed","setDocsVisible","field","x","y","obj","serialize","schema","firstElement","getElement","serializeRoot","element","getElementRoot","state","widthMap","window","UNSAFE_componentWillReceiveProps","nextProps","slice","setWidth","getWidth","rootWidth","root","columnWidth","stackWidths","map","stack","path","concat","reduce","acc","curr","componentDidMount","render","emptySchema","undefined","createElement","ErrorContainer","DocsExplorerContainer","onKeyDown","tabIndex","width","index","key","level","Component","mapDispatchToProps","dispatch","bindActionCreators","toggleDocs","changeWidthDocs","mapStateToProps","createStructuredSelector","getSessionDocs","getSelectedSessionIdFromRoot","connect","forwardRef","styled","div","templateObject_1"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar __extends = void 0 && (void 0).__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __makeTemplateObject = void 0 && (void 0).__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar redux_1 = require(\"redux\");\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar keycode = require(\"keycode\");\n\nvar FieldDoc_1 = require(\"./FieldDoc\");\n\nvar ColumnDoc_1 = require(\"./ColumnDoc\");\n\nvar actions_1 = require(\"../../../state/docs/actions\");\n\nvar Spinner_1 = require(\"../../Spinner\");\n\nvar constants_1 = require(\"../../../constants\");\n\nvar RootColumn_1 = require(\"./RootColumn\");\n\nvar stack_1 = require(\"../util/stack\");\n\nvar selectors_1 = require(\"../../../state/docs/selectors\");\n\nvar selectors_2 = require(\"../../../state/sessions/selectors\");\n\nvar reselect_1 = require(\"reselect\");\n\nvar ErrorContainer_1 = require(\"./ErrorContainer\");\n\nvar styled_1 = require(\"../../../styled\");\n\nvar GraphDocs =\n/** @class */\nfunction (_super) {\n  __extends(GraphDocs, _super); // private refDocExplorer: any;\n\n\n  function GraphDocs(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.setRef = function (ref) {\n      _this.ref = ref;\n    };\n\n    _this.showDocFromType = function (type) {\n      _this.props.addStack(_this.props.sessionId, type, 0, 0);\n    };\n\n    _this.handleSearch = function (value) {\n      _this.setState({\n        searchValue: value\n      });\n    };\n\n    _this.handleKeyDown = function (e) {\n      // we don't want to interfere with inputs\n      if (e.target instanceof HTMLInputElement || e.metaKey || e.shiftKey || e.altKey || e.ctrlKey) {\n        return;\n      }\n\n      e.preventDefault();\n\n      _this.props.changeKeyMove(_this.props.sessionId, true);\n\n      var lastNavStack = _this.props.docs.navStack.length > 0 && _this.props.docs.navStack[_this.props.docs.navStack.length - 1];\n      var beforeLastNavStack = _this.props.docs.navStack.length > 0 && _this.props.docs.navStack[_this.props.docs.navStack.length - 2];\n      var keyPressed = keycode(e);\n\n      switch (keyPressed) {\n        case 'esc':\n          _this.props.setDocsVisible(_this.props.sessionId, false);\n\n          break;\n\n        case 'left':\n          if (beforeLastNavStack) {\n            _this.props.addStack(_this.props.sessionId, beforeLastNavStack.field, beforeLastNavStack.x, beforeLastNavStack.y);\n          }\n\n          break;\n\n        case 'right':\n          if (lastNavStack) {\n            var obj = stack_1.serialize(_this.props.schema, lastNavStack.field);\n            var firstElement = stack_1.getElement(obj, 0);\n\n            if (firstElement) {\n              _this.props.addStack(_this.props.sessionId, firstElement, lastNavStack.x + 1, 0);\n            }\n          } else {\n            var obj = stack_1.serializeRoot(_this.props.schema);\n            var element = stack_1.getElementRoot(obj, 0);\n\n            if (element) {\n              _this.props.addStack(_this.props.sessionId, element, 0, 0);\n            }\n          }\n\n          break;\n\n        case 'up':\n        case 'down':\n          if (beforeLastNavStack) {\n            var obj = stack_1.serialize(_this.props.schema, beforeLastNavStack.field);\n            var element = stack_1.getElement(obj, keyPressed === 'up' ? lastNavStack.y - 1 : lastNavStack.y + 1);\n\n            if (element) {\n              _this.props.addStack(_this.props.sessionId, element, lastNavStack.x, keyPressed === 'up' ? lastNavStack.y - 1 : lastNavStack.y + 1);\n            }\n          } else {\n            var obj = stack_1.serializeRoot(_this.props.schema);\n            var y = lastNavStack ? lastNavStack.y : 0;\n            var element = stack_1.getElementRoot(obj, keyPressed === 'up' ? y - 1 : y + 1);\n\n            if (element) {\n              _this.props.addStack(_this.props.sessionId, element, 0, keyPressed === 'up' ? y - 1 : y + 1);\n            }\n          }\n\n          break;\n      }\n    };\n\n    _this.state = {\n      searchValue: '',\n      widthMap: {}\n    };\n    window.d = _this;\n    return _this;\n  }\n\n  GraphDocs.prototype.UNSAFE_componentWillReceiveProps = function (nextProps) {\n    // If user use default column size % columnWidth\n    // Make the column follow the clicks\n    if (this.props.docs.navStack.length !== nextProps.docs.navStack.length || this.props.docs.navStack.slice(-1)[0] !== nextProps.docs.navStack.slice(-1)[0] || !this.props.schema && nextProps.schema) {\n      this.setWidth(nextProps);\n    }\n  };\n\n  GraphDocs.prototype.setWidth = function (props) {\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    this.props.setWidth(props);\n  };\n\n  GraphDocs.prototype.getWidth = function (props) {\n    var _this = this;\n\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var rootWidth = this.state.widthMap.root || constants_1.columnWidth;\n    var stackWidths = props.docs.navStack.map(function (stack) {\n      return _this.state.widthMap[stack.field.path] || constants_1.columnWidth;\n    });\n    return [rootWidth].concat(stackWidths).reduce(function (acc, curr) {\n      return acc + curr;\n    }, 0);\n  };\n\n  GraphDocs.prototype.componentDidMount = function () {\n    this.setWidth();\n  };\n\n  GraphDocs.prototype.render = function () {\n    var _this = this;\n\n    var navStack = this.props.docs.navStack;\n    var schema = this.props.schema;\n    var emptySchema;\n\n    if (schema === undefined) {\n      // Schema is undefined when it is being loaded via introspection.\n      emptySchema = /*#__PURE__*/React.createElement(Spinner_1[\"default\"], null);\n    } else if (schema === null) {\n      // Schema is null when it explicitly does not exist, typically due to\n      // an error during introspection.\n      emptySchema = /*#__PURE__*/React.createElement(ErrorContainer_1.ErrorContainer, null, 'No Schema Available');\n    }\n\n    return /*#__PURE__*/React.createElement(DocsExplorerContainer, {\n      onKeyDown: this.handleKeyDown,\n      tabIndex: 0,\n      ref: this.setRef\n    }, emptySchema && /*#__PURE__*/React.createElement(ColumnDoc_1[\"default\"], null, emptySchema), !emptySchema && schema && /*#__PURE__*/React.createElement(RootColumn_1[\"default\"], {\n      schema: schema,\n      width: this.state.widthMap.root || constants_1.columnWidth - 1,\n      searchValue: this.state.searchValue,\n      handleSearch: this.handleSearch,\n      sessionId: this.props.sessionId\n    }), navStack.map(function (stack, index) {\n      return /*#__PURE__*/React.createElement(ColumnDoc_1[\"default\"], {\n        key: index,\n        width: _this.state.widthMap[stack.field.path] || constants_1.columnWidth\n      }, /*#__PURE__*/React.createElement(FieldDoc_1[\"default\"], {\n        schema: schema,\n        field: stack.field,\n        level: index + 1,\n        sessionId: _this.props.sessionId\n      }));\n    }));\n  };\n\n  return GraphDocs;\n}(React.Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return redux_1.bindActionCreators({\n    addStack: actions_1.addStack,\n    toggleDocs: actions_1.toggleDocs,\n    changeWidthDocs: actions_1.changeWidthDocs,\n    changeKeyMove: actions_1.changeKeyMove,\n    setDocsVisible: actions_1.setDocsVisible\n  }, dispatch);\n};\n\nvar mapStateToProps = reselect_1.createStructuredSelector({\n  docs: selectors_1.getSessionDocs,\n  sessionId: selectors_2.getSelectedSessionIdFromRoot\n});\nexports[\"default\"] = react_redux_1.connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true\n})(GraphDocs);\nvar DocsExplorerContainer = styled_1.styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  display: flex;\\n  position: relative;\\n  height: 100%;\\n  width: 100%;\\n  overflow-x: auto;\\n  overflow-y: hidden;\\n  outline: none !important;\\n\"], [\"\\n  display: flex;\\n  position: relative;\\n  height: 100%;\\n  width: 100%;\\n  overflow-x: auto;\\n  overflow-y: hidden;\\n  outline: none !important;\\n\"])));\nvar templateObject_1;"]},"metadata":{},"sourceType":"script"}